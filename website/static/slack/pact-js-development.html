<html><body><style>
			* {
				font-family:sans-serif;
			}
			body {
				text-align:center;
				padding:1em;
			}
			.messages {
				width:100%;
				max-width:700px;
				text-align:left;
				display:inline-block;
			}
			.messages img {
				background-color:rgb(248,244,240);
				width:36px;
				height:36px;
				border-radius:0.2em;
				display:inline-block;
				vertical-align:top;
				margin-right:0.65em;
			}
			.messages .time {
				display:inline-block;
				color:rgb(200,200,200);
				margin-left:0.5em;
			}
			.messages .username {
				display:inline-block;
				font-weight:600;
				line-height:1;
			}
			.messages .message {
				display:inline-block;
				vertical-align:top;
				line-height:1;
				width:calc(100% - 3em);
			}
			.messages .message .msg {
				line-height:1.5;
			}
		</style><div class="messages"><div><img src="https://avatars.slack-edge.com/2018-06-18/383099788962_f8a3efa7488b02d0dfb8_72.png" /><div class="message"><div class="username">tjones</div><div class="time">2020-10-09 12:11</div><div class="msg">has joined #pact-js-development</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-06-18/383099788962_f8a3efa7488b02d0dfb8_72.png" /><div class="message"><div class="username">tjones</div><div class="time">2020-10-09 12:11</div><div class="msg">@tjones set the channel purpose: Collaboration and coordination for the pact spec V3 branch</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /><div class="message"><div class="username">matt.fellows</div><div class="time">2020-10-09 12:11</div><div class="msg">has joined #pact-js-development</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2019-08-26/740232217414_014b213119f6e40fa572_72.jpg" /><div class="message"><div class="username">uglyog</div><div class="time">2020-10-09 12:11</div><div class="msg">has joined #pact-js-development</div></div></div><br/>
<div><img src="https://secure.gravatar.com/avatar/1bc78b46e2d01c7311d205a35c4d5e18.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0003-72.png" /><div class="message"><div class="username">brendan.donegan</div><div class="time">2020-10-09 12:11</div><div class="msg">has joined #pact-js-development</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-06-18/383099788962_f8a3efa7488b02d0dfb8_72.png" /><div class="message"><div class="username">tjones</div><div class="time">2020-10-09 12:12</div><div class="msg">@tjones set the channel topic: Let's get pact-js spec V3 ready to release! Anyone interested welcome, see the master issue here for high level overview: <a href="https://github.com/pact-foundation/pact-js/issues/413">https://github.com/pact-foundation/pact-js/issues/413</a></div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2019-04-24/606247929682_e52f292f55941b5e901a_72.jpg" /><div class="message"><div class="username">audun.halland</div><div class="time">2020-10-09 12:15</div><div class="msg">has joined #pact-js-development</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-06-18/383099788962_f8a3efa7488b02d0dfb8_72.png" /><div class="message"><div class="username">tjones</div><div class="time">2020-10-09 12:18</div><div class="msg">Ok friends! Although I've been maintaining pact-js + node for a while (alongside an excellent team of others), I don't yet have much context for the v3 branch. So I'll be learning along with you</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2019-04-24/606247929682_e52f292f55941b5e901a_72.jpg" /><div class="message"><div class="username">audun.halland</div><div class="time">2020-10-09 12:29</div><div class="msg">_mainly_ here out of curiosity, as I tried to experiment with the v3 branch a while ago. I was a bit surprised that it used a different js API, instead of just a `spec: "v3"` (or similar) parameter.</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2019-04-24/606247929682_e52f292f55941b5e901a_72.jpg" /><div class="message"><div class="username">audun.halland</div><div class="time">2020-10-09 12:38</div><div class="msg">I remember I had problems with 1. managing several mock servers running in parallel in one (jest) test 2. (possibly) several interactions for the same server. My memory may be failing me :)</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-06-18/383099788962_f8a3efa7488b02d0dfb8_72.png" /><div class="message"><div class="username">tjones</div><div class="time">2020-10-10 04:24</div><div class="msg">It looks like the model is one server per interaction- did this cause unexpected problems?</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-06-18/383099788962_f8a3efa7488b02d0dfb8_72.png" /><div class="message"><div class="username">tjones</div><div class="time">2020-10-10 04:26</div><div class="msg">Yeah, I'd like to bring the APIs closer together. The setup and teardown is different out of necessity, because the underlying implementation is different. We should be able to bring the DSL closer together, though.</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2019-04-24/606247929682_e52f292f55941b5e901a_72.jpg" /><div class="message"><div class="username">audun.halland</div><div class="time">2020-10-10 12:54</div><div class="msg">Just think that this api design necessarily causes time consuming refactors, since a lot of our tests have assumed that this will always be possible.</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2019-04-24/606247929682_e52f292f55941b5e901a_72.jpg" /><div class="message"><div class="username">audun.halland</div><div class="time">2020-10-10 13:06</div><div class="msg">Also, as a consequence of javascript working the way it does with JSON deserialisation - it deserializes any valid JSON - we have opted for our JS consumer tests to be generally ?beefier? (a bit more like integration tests) than tests would naturally be in other languages with strict/typed deserialization. My view is that there?s no point having a consumer test if you don?t actually verify that a given response works as intended - you need some code module to send that response into to at least verify that _something works_.

The consequence of that was that it was harder to strictly separate tests to a single endpoint call each, because we have used a higher abstraction layer for our (javascript) tests.</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2019-04-24/606247929682_e52f292f55941b5e901a_72.jpg" /><div class="message"><div class="username">audun.halland</div><div class="time">2020-10-10 13:10</div><div class="msg">And a lot of code bases will be configured given a ?base url? to a specific service (that?s the mock server?s URL under a pact test) and would expect the different provider endpoints to share the same base URL, which will not be possible if there?s one interaction per mock server</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2019-04-24/606247929682_e52f292f55941b5e901a_72.jpg" /><div class="message"><div class="username">audun.halland</div><div class="time">2020-10-10 22:27</div><div class="msg">I see, yes, though still curious as to what exactly makes it need do that out of necessity. I?m a `pact-reference` contributor, I?d love to contribute here also, but I feel I need to understand the architectural choices first</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-06-18/383099788962_f8a3efa7488b02d0dfb8_72.png" /><div class="message"><div class="username">tjones</div><div class="time">2020-10-12 07:31</div><div class="msg">I've fixed the issue you mention about test boundaries by using fixtures - as in:

```expect(apiLayer.someCall()).toReturn(expectedFixture);```
and then in the test where your API layer would be invoked, do:

```const mockApi = { someCall: jest.fn().mockReturn(someFixture)
}```
(or whatever)</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-06-18/383099788962_f8a3efa7488b02d0dfb8_72.png" /><div class="message"><div class="username">tjones</div><div class="time">2020-10-12 07:32</div><div class="msg">I'd been meaning to write that up as a blog post, I should get around to taht.</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-06-18/383099788962_f8a3efa7488b02d0dfb8_72.png" /><div class="message"><div class="username">tjones</div><div class="time">2020-10-12 07:33</div><div class="msg">&gt; And a lot of code bases will be configured given a ?base url? to a specific service 
My experience is that it's generally easy to change this on the fly in JS codebases (all the current examples do). But you do raise a good point - ideally Pact wouldn't have an opinion about it</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-06-18/383099788962_f8a3efa7488b02d0dfb8_72.png" /><div class="message"><div class="username">tjones</div><div class="time">2020-10-12 07:34</div><div class="msg">Ah! So, I don't know anything about pact-reference yet - I thought it was some reason to do with the way pact-reference works.</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /><div class="message"><div class="username">matt.fellows</div><div class="time">2020-10-12 09:07</div><div class="msg">My ideal scenario is that we intercept/proxy the network runtime (think mock) to avoid the need of configuring this sort of thing. It's doable, and I think would solve a big pain point for many pact users (especially newbies)</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2019-04-24/606247929682_e52f292f55941b5e901a_72.jpg" /><div class="message"><div class="username">audun.halland</div><div class="time">2020-10-12 21:15</div><div class="msg">You mean using something like `nock`, that hooks quite deep into node.js network runtime?</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2019-04-24/606247929682_e52f292f55941b5e901a_72.jpg" /><div class="message"><div class="username">audun.halland</div><div class="time">2020-10-12 21:16</div><div class="msg">so you could work with your existing (potentially hard coded) URLs</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /><div class="message"><div class="username">matt.fellows</div><div class="time">2020-10-12 21:27</div><div class="msg">Yes something like that</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-06-18/383099788962_f8a3efa7488b02d0dfb8_72.png" /><div class="message"><div class="username">tjones</div><div class="time">2020-10-15 00:29</div><div class="msg">@uglyog: Is there a reason the examples spin up one server instance per interaction?</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2019-08-26/740232217414_014b213119f6e40fa572_72.jpg" /><div class="message"><div class="username">uglyog</div><div class="time">2020-10-15 00:34</div><div class="msg">Why, do you want two?</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2019-08-26/740232217414_014b213119f6e40fa572_72.jpg" /><div class="message"><div class="username">uglyog</div><div class="time">2020-10-15 00:38</div><div class="msg">The previous implementation had to have a long running stateful mock server, because it was a separate process. This is no longer a requirement, so now each test can get a new mock server initialised with the context required for that test. There is now no need to manage different state between each test.</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2019-08-26/740232217414_014b213119f6e40fa572_72.jpg" /><div class="message"><div class="username">uglyog</div><div class="time">2020-10-15 00:39</div><div class="msg">This is a better design (in my option). Pact-JVM also works in this way.</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2019-08-26/740232217414_014b213119f6e40fa572_72.jpg" /><div class="message"><div class="username">uglyog</div><div class="time">2020-10-15 00:41</div><div class="msg">It also eliminates the HTTP setup/cleanup interactions between the test harness setup/teardown and the mock server. Test setup just configures the pact file in memory, and then that memory is given to the new mock server, and the results are then fetched directly from it.</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /><div class="message"><div class="username">matt.fellows</div><div class="time">2020-10-15 02:27</div><div class="msg">another very nice benefit is that you can run things in parallel</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /><div class="message"><div class="username">matt.fellows</div><div class="time">2020-10-15 02:27</div><div class="msg">From memory, point (2) from Audun is still possible with the current design, if not obvious coming from the previous approach</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2019-08-26/740232217414_014b213119f6e40fa572_72.jpg" /><div class="message"><div class="username">uglyog</div><div class="time">2020-10-15 02:38</div><div class="msg">You can now also have tests run against multiple providers, where each can be a separate mock server.</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-06-18/383099788962_f8a3efa7488b02d0dfb8_72.png" /><div class="message"><div class="username">tjones</div><div class="time">2020-10-16 03:45</div><div class="msg">The reason is because a single mock server means a single URL can be used for all tests.</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-06-18/383099788962_f8a3efa7488b02d0dfb8_72.png" /><div class="message"><div class="username">tjones</div><div class="time">2020-10-16 03:46</div><div class="msg">You can already do that</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2019-08-26/740232217414_014b213119f6e40fa572_72.jpg" /><div class="message"><div class="username">uglyog</div><div class="time">2020-10-16 04:03</div><div class="msg">There is no need for a single URL for all tests if each test gets the URL it needs</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-06-18/383099788962_f8a3efa7488b02d0dfb8_72.png" /><div class="message"><div class="username">tjones</div><div class="time">2020-10-19 01:13</div><div class="msg">The point is that some application architectures don't work that way. I've personally not architected code that way, but I don't want pact-js to enforce a particular architecture if it doesn't need to</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2020-04-17/1069959505586_5d689bd4c85edbc61d4e_72.jpg" /><div class="message"><div class="username">darshan</div><div class="time">2020-10-28 13:11</div><div class="msg">has joined #pact-js-development</div></div></div><br/>
<div><img src="https://secure.gravatar.com/avatar/3960bb95f3931928b83620905658b558.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0021-72.png" /><div class="message"><div class="username">joao.salles</div><div class="time">2020-10-30 07:03</div><div class="msg">has joined #pact-js-development</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-06-18/383099788962_f8a3efa7488b02d0dfb8_72.png" /><div class="message"><div class="username">tjones</div><div class="time">2020-12-17 06:58</div><div class="msg">@tjones has renamed the channel from "pact-js-spec-v3" to "pact-js-development"</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-06-18/383099788962_f8a3efa7488b02d0dfb8_72.png" /><div class="message"><div class="username">tjones</div><div class="time">2020-12-17 07:04</div><div class="msg">@matt.fellows: We've spoken before about improving the quality of the GraphQL interaction type - since at the moment, it is a regex which sometimes results in incorrect matching. I can't see an issue for this, would you be able to make one, since you're more familiar with the issues?</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /><div class="message"><div class="username">matt.fellows</div><div class="time">2020-12-17 07:05</div><div class="msg">/github subscribe list</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /><div class="message"><div class="username">matt.fellows</div><div class="time">2020-12-17 07:05</div><div class="msg">/github subscribe pact-foundation/pact-js</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /><div class="message"><div class="username">matt.fellows</div><div class="time">2020-12-17 07:06</div><div class="msg">This is the only issue I?m properly aware of: <a href="https://github.com/pact-foundation/pact-js/issues/292">https://github.com/pact-foundation/pact-js/issues/292</a></div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /><div class="message"><div class="username">matt.fellows</div><div class="time">2020-12-17 07:07</div><div class="msg">The other is that it doesn?t support mutations as a keyword, and doesn?t support subscriptions (that requires more thinking, it might perhaps fit within the pact message framework)</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /><div class="message"><div class="username">matt.fellows</div><div class="time">2020-12-17 07:08</div><div class="msg">I?m not sure what I?d raise beyond it, other than I know it?s not perfect. Because GraphQL has its own grammar, it really needs first class support in the ruby/rust engine.</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2019-08-26/740232217414_014b213119f6e40fa572_72.jpg" /><div class="message"><div class="username">uglyog</div><div class="time">2021-01-05 04:26</div><div class="msg">How do I release a new version of the Pact-JS V3 when the travis build is dead?</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-06-18/383099788962_f8a3efa7488b02d0dfb8_72.png" /><div class="message"><div class="username">tjones</div><div class="time">2021-01-20 09:01</div><div class="msg">@uglyog When you get a moment, could you merge master into V3? I'm without a development machine for a few days</div></div></div><br/>
<div><img src="https://secure.gravatar.com/avatar/a2c1547d061f81b38aa8f59a948f9e09.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0006-72.png" /><div class="message"><div class="username">artur</div><div class="time">2021-01-20 09:08</div><div class="msg">has joined #pact-js-development</div></div></div><br/>
<div><img src="https://secure.gravatar.com/avatar/a2c1547d061f81b38aa8f59a948f9e09.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0006-72.png" /><div class="message"><div class="username">artur</div><div class="time">2021-01-20 09:13</div><div class="msg">@tjones I don't understand what you mean with "promisify on our side with a callback" in <a href="https://pact-foundation.slack.com/archives/C9VBGLUM9/p1611133612062000?thread_ts=1611046137.058100&amp;cid=C9VBGLUM9">https://pact-foundation.slack.com/archives/C9VBGLUM9/p1611133612062000?thread_ts=1611046137.058100&amp;cid=C9VBGLUM9</a></div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-06-18/383099788962_f8a3efa7488b02d0dfb8_72.png" /><div class="message"><div class="username">tjones</div><div class="time">2021-01-20 09:16</div><div class="msg">```new Promise((resolve, reject) =&gt; {
   const result = someSyncFunction();
   if( result.isSuccess() )  {
        // or however you check
        resolve(result.data); // or whatever
   } else {
        reject(result.error); // or whatever
   }
});```</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-06-18/383099788962_f8a3efa7488b02d0dfb8_72.png" /><div class="message"><div class="username">tjones</div><div class="time">2021-01-20 09:19</div><div class="msg">^ Something like that will let us present sync functions as if they're async. Coupled with a `Promise.resolve(stateFunc())` or similar, I reckon we could then accept both sync and async state functions.</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-06-18/383099788962_f8a3efa7488b02d0dfb8_72.png" /><div class="message"><div class="username">tjones</div><div class="time">2021-01-20 09:19</div><div class="msg">(disclaimer: I am not really across the V3 code)</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-06-18/383099788962_f8a3efa7488b02d0dfb8_72.png" /><div class="message"><div class="username">tjones</div><div class="time">2021-01-20 09:19</div><div class="msg">(secondary disclaimer: that code might not be right, I just typed it out into slack)</div></div></div><br/>
<div><img src="https://secure.gravatar.com/avatar/a2c1547d061f81b38aa8f59a948f9e09.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0006-72.png" /><div class="message"><div class="username">artur</div><div class="time">2021-01-20 10:08</div><div class="msg">synchronous  functions are fine, the problems are async functions. In my case node-fetch returns a Promise and the code does not wait for it to be resolved.
I fail to understand how your solution would help with that, but I also admit I fail to understand Promises in general :wink:</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-06-18/383099788962_f8a3efa7488b02d0dfb8_72.png" /><div class="message"><div class="username">tjones</div><div class="time">2021-01-20 10:09</div><div class="msg">Can you point me to the part of the code that doesn't wait?</div></div></div><br/>
<div><img src="https://secure.gravatar.com/avatar/a2c1547d061f81b38aa8f59a948f9e09.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0006-72.png" /><div class="message"><div class="username">artur</div><div class="time">2021-01-20 10:10</div><div class="msg"><a href="https://github.com/individual-it/pact-js/blob/asyncProviderStates/examples/v3/e2e/test/provider.spec.js#L77-L80">https://github.com/individual-it/pact-js/blob/asyncProviderStates/examples/v3/e2e/test/provider.spec.js#L77-L80</a></div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-06-18/383099788962_f8a3efa7488b02d0dfb8_72.png" /><div class="message"><div class="username">tjones</div><div class="time">2021-01-20 10:11</div><div class="msg">Right, sorry, I meant the part of pact-js</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-06-18/383099788962_f8a3efa7488b02d0dfb8_72.png" /><div class="message"><div class="username">tjones</div><div class="time">2021-01-20 10:11</div><div class="msg">I'm still not familiar with the V3 branch yet</div></div></div><br/>
<div><img src="https://secure.gravatar.com/avatar/a2c1547d061f81b38aa8f59a948f9e09.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0006-72.png" /><div class="message"><div class="username">artur</div><div class="time">2021-01-20 10:13</div><div class="msg">I guess it must be here <a href="https://github.com/pact-foundation/pact-js/blob/feat/v3.0.0/src/v3/verifier.ts#L73">https://github.com/pact-foundation/pact-js/blob/feat/v3.0.0/src/v3/verifier.ts#L73</a></div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-06-18/383099788962_f8a3efa7488b02d0dfb8_72.png" /><div class="message"><div class="username">tjones</div><div class="time">2021-01-20 10:13</div><div class="msg">yeah, I was just coming to that conclusion myself</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-06-18/383099788962_f8a3efa7488b02d0dfb8_72.png" /><div class="message"><div class="username">tjones</div><div class="time">2021-01-20 10:13</div><div class="msg">hmmm</div></div></div><br/>
<div><img src="https://secure.gravatar.com/avatar/a2c1547d061f81b38aa8f59a948f9e09.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0006-72.png" /><div class="message"><div class="username">artur</div><div class="time">2021-01-20 10:14</div><div class="msg">I guess `this.config` contains all the options including the states-functions</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-06-18/383099788962_f8a3efa7488b02d0dfb8_72.png" /><div class="message"><div class="username">tjones</div><div class="time">2021-01-20 10:14</div><div class="msg">right, and it just delegates everything</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-06-18/383099788962_f8a3efa7488b02d0dfb8_72.png" /><div class="message"><div class="username">tjones</div><div class="time">2021-01-20 10:15</div><div class="msg">I see why @uglyog was saying we need to wait for promise support in the native bindings.</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-06-18/383099788962_f8a3efa7488b02d0dfb8_72.png" /><div class="message"><div class="username">tjones</div><div class="time">2021-01-20 10:15</div><div class="msg">I had assumed that we had some sync function called in the native binding, which we could then promisify</div></div></div><br/>
<div><img src="https://secure.gravatar.com/avatar/a2c1547d061f81b38aa8f59a948f9e09.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0006-72.png" /><div class="message"><div class="username">artur</div><div class="time">2021-01-20 10:17</div><div class="msg">here is what signal does: <a href="https://github.com/signalapp/libsignal-client/pull/65">https://github.com/signalapp/libsignal-client/pull/65</a>
I think the challenge is simmilar</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-06-18/383099788962_f8a3efa7488b02d0dfb8_72.png" /><div class="message"><div class="username">tjones</div><div class="time">2021-01-20 10:18</div><div class="msg">One of the signal devs says:

&gt; This code is terrifying and I expect will be really fun to debug if/when something goes wrong.</div></div></div><br/>
<div><img src="https://secure.gravatar.com/avatar/a2c1547d061f81b38aa8f59a948f9e09.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0006-72.png" /><div class="message"><div class="username">artur</div><div class="time">2021-01-20 10:19</div><div class="msg">:scream:</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-06-18/383099788962_f8a3efa7488b02d0dfb8_72.png" /><div class="message"><div class="username">tjones</div><div class="time">2021-01-20 10:19</div><div class="msg">I think we should try to avoid reading js promises in rust</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-06-18/383099788962_f8a3efa7488b02d0dfb8_72.png" /><div class="message"><div class="username">tjones</div><div class="time">2021-01-20 10:21</div><div class="msg">it looks like the `native` library we're using to contact the rust reference implementation also implements a lot of functionality. I think (without much context, so perhaps Ron already considered this and rejected it for some good reason I haven't thought of), we should have the `native` wrapper be as thin as possible and implement the behaviour it needs in JS.</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-06-18/383099788962_f8a3efa7488b02d0dfb8_72.png" /><div class="message"><div class="username">tjones</div><div class="time">2021-01-20 10:23</div><div class="msg">Of course, this doesn't really help you right now.</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-06-18/383099788962_f8a3efa7488b02d0dfb8_72.png" /><div class="message"><div class="username">tjones</div><div class="time">2021-01-20 10:23</div><div class="msg">Let me have a think</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-06-18/383099788962_f8a3efa7488b02d0dfb8_72.png" /><div class="message"><div class="username">tjones</div><div class="time">2021-01-20 10:44</div><div class="msg">So, I think if Rust doesn't support JS promises, it'll have to pass a `done` callback in to the state function. I don't know enough Rust to be able to modify the wrapper though</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-06-18/383099788962_f8a3efa7488b02d0dfb8_72.png" /><div class="message"><div class="username">tjones</div><div class="time">2021-01-20 10:44</div><div class="msg">I'll have a chat with Ron tomorrow</div></div></div><br/>
<div><img src="https://secure.gravatar.com/avatar/a2c1547d061f81b38aa8f59a948f9e09.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0006-72.png" /><div class="message"><div class="username">artur</div><div class="time">2021-01-20 10:57</div><div class="msg">I think it would be a useful feature to be able to use async code in the states. If its not possible it should be documented (happy to make that docs PR)</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-06-18/383099788962_f8a3efa7488b02d0dfb8_72.png" /><div class="message"><div class="username">tjones</div><div class="time">2021-01-20 11:11</div><div class="msg">Yeah, I agree that it would be best if promises were supported</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-06-18/383099788962_f8a3efa7488b02d0dfb8_72.png" /><div class="message"><div class="username">tjones</div><div class="time">2021-01-20 11:11</div><div class="msg">if you have a moment to make a feature request issue that would be great, otherwise I'll do it tomorrow</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2019-08-26/740232217414_014b213119f6e40fa572_72.jpg" /><div class="message"><div class="username">uglyog</div><div class="time">2021-01-20 22:11</div><div class="msg">&gt; we should have the native wrapper be as thin as possible and implement the behaviour it needs in JS. 
The problem then is we have to replicate that in all the various languages. By making the language specific part as thin as possible means better support across JS, C++, Python, Go, etc.</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2019-08-26/740232217414_014b213119f6e40fa572_72.jpg" /><div class="message"><div class="username">uglyog</div><div class="time">2021-01-20 22:14</div><div class="msg">I did put a comment about async provider state callbacks in the readme, but that is on the V3 branch</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2019-08-26/740232217414_014b213119f6e40fa572_72.jpg" /><div class="message"><div class="username">uglyog</div><div class="time">2021-01-20 23:07</div><div class="msg">I'm thinking that a `done` callback might actually work. I'll have to try that and see how it goes.</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-06-18/383099788962_f8a3efa7488b02d0dfb8_72.png" /><div class="message"><div class="username">tjones</div><div class="time">2021-01-21 00:27</div><div class="msg">@uglyog Right, yes- we don't want to replicate the core pact functionality across all the frameworks. However, the `native` wrapper part is (as I understand it) specific to JS. Is there functionality in there that should be moved to the reference rust implementation?</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-06-18/383099788962_f8a3efa7488b02d0dfb8_72.png" /><div class="message"><div class="username">tjones</div><div class="time">2021-01-21 00:27</div><div class="msg">Or, can we pull the functionality out to JS?</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2019-08-26/740232217414_014b213119f6e40fa572_72.jpg" /><div class="message"><div class="username">uglyog</div><div class="time">2021-01-21 00:31</div><div class="msg">The wrapper just translates from JS to Rust and back, it doesn't do much more.</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2019-04-24/606247929682_e52f292f55941b5e901a_72.jpg" /><div class="message"><div class="username">audun.halland</div><div class="time">2021-01-25 13:56</div><div class="msg">I tried out pact-js/v3 again, and it crashes during error reporting. Problem is here: <a href="https://github.com/pact-foundation/pact-js/blob/feat/v3.0.0/src/v3/pact.ts#L86">https://github.com/pact-foundation/pact-js/blob/feat/v3.0.0/src/v3/pact.ts#L86</a>, it tries to do `.substr` on something that is not a string.</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /><div class="message"><div class="username">matt.fellows</div><div class="time">2021-01-25 22:11</div><div class="msg">Gah, that?s embarrassing. I?m off today Audun (public holiday here in Aus) but will set a reminder to look at this tomorrow (even if just raising a tracking issue)</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /><div class="message"><div class="username">matt.fellows</div><div class="time">2021-01-25 22:11</div><div class="msg">thanks!</div></div></div><br/>
<div><img src="https://secure.gravatar.com/avatar/1bc78b46e2d01c7311d205a35c4d5e18.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0003-72.png" /><div class="message"><div class="username">brendan.donegan</div><div class="time">2021-01-26 14:57</div><div class="msg">Hi - I?m looking at using Pact v3 and one of the reasons for this is because we want to use the ?fromProviderState? functionality to inject unique id?s of newly created objects into our requests.  I was following this example - <a href="https://github.com/pact-foundation/pact-js/blob/feat/v3.0.0/examples/v3/provider-state-injected/consumer/transaction-service.test.js">https://github.com/pact-foundation/pact-js/blob/feat/v3.0.0/examples/v3/provider-state-injected/consumer/transaction-service.test.js</a></div></div></div><br/>
<div><img src="https://secure.gravatar.com/avatar/1bc78b46e2d01c7311d205a35c4d5e18.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0003-72.png" /><div class="message"><div class="username">brendan.donegan</div><div class="time">2021-01-26 14:57</div><div class="msg">This little bit of syntax seems to be problematic for linters: `fromProviderState("\${accountNumber}", "100")`</div></div></div><br/>
<div><img src="https://secure.gravatar.com/avatar/1bc78b46e2d01c7311d205a35c4d5e18.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0003-72.png" /><div class="message"><div class="username">brendan.donegan</div><div class="time">2021-01-26 14:58</div><div class="msg">apparently it violates eslint rule `no-template-curly-in-string`, and also it seems like prettier wants to remove the \ before the $ sign</div></div></div><br/>
<div><img src="https://secure.gravatar.com/avatar/1bc78b46e2d01c7311d205a35c4d5e18.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0003-72.png" /><div class="message"><div class="username">brendan.donegan</div><div class="time">2021-01-26 15:16</div><div class="msg">Also I want to use the fromProviderState in the path: but it seems to be failing because it?s returning an object - is it possible to use it in the path?</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2019-08-26/740232217414_014b213119f6e40fa572_72.jpg" /><div class="message"><div class="username">uglyog</div><div class="time">2021-01-26 22:10</div><div class="msg">This seems like a stupid lint rule, because templates can't be used in normal strings. You can add a suppression for it, or update the lint rules</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2019-08-26/740232217414_014b213119f6e40fa572_72.jpg" /><div class="message"><div class="username">uglyog</div><div class="time">2021-01-26 22:12</div><div class="msg">How can you automatically convert an Object to a path, which is a string? That will just add [`Object....]` to the path unless it implements `toString()`.</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-06-18/383099788962_f8a3efa7488b02d0dfb8_72.png" /><div class="message"><div class="username">tjones</div><div class="time">2021-01-27 00:14</div><div class="msg">Hmm. I wouldn't expect prettier to want to remove the "\" - the whole pact-js repository is formatted with prettier, so if this were a problem the examples would break. Do you have an unusual prettier config?

Perhaps we should provide an eslint plugin that sorts this out for pact tests-  in the meantime, you'll probably have to just turn off the rule on the line. Sorry.

@uglyog - this kind of lint rule is pretty idomatic in js/ts land- it's to discourage code that might be a mistake or has a subtlety you might not notice (whether or not we agree with this value is kind of a side point - the idioms and standards of the community are out there). Do we have much control over the way the templates for provider states are described? The `"\${varName}"` syntax looks a bit jarring in JS, and if it's interfering with the tooling, it would be great to change it to something like `"{{varname}}"` or `"[[varname]]"` or something that doesn't interfere.</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2019-08-26/740232217414_014b213119f6e40fa572_72.jpg" /><div class="message"><div class="username">uglyog</div><div class="time">2021-01-27 00:25</div><div class="msg">It will have to be translated, because the $ form is what needs to be persisted in the Pact file</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-06-18/383099788962_f8a3efa7488b02d0dfb8_72.png" /><div class="message"><div class="username">tjones</div><div class="time">2021-01-27 00:46</div><div class="msg">That's fine, we can translate it in JS land.</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-06-18/383099788962_f8a3efa7488b02d0dfb8_72.png" /><div class="message"><div class="username">tjones</div><div class="time">2021-01-27 00:46</div><div class="msg">@brendan.donegan: Do you have an opinion on what the syntax should be?</div></div></div><br/>
<div><img src="https://secure.gravatar.com/avatar/a2c1547d061f81b38aa8f59a948f9e09.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0006-72.png" /><div class="message"><div class="username">artur</div><div class="time">2021-01-27 03:56</div><div class="msg">would it be possible to create a new release of v3? I would like to use <a href="https://github.com/pact-foundation/pact-js/commit/6d44059db1917c17e40f128a4b3eedfda16fd2c1">https://github.com/pact-foundation/pact-js/commit/6d44059db1917c17e40f128a4b3eedfda16fd2c1</a></div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-06-18/383099788962_f8a3efa7488b02d0dfb8_72.png" /><div class="message"><div class="username">tjones</div><div class="time">2021-01-27 03:57</div><div class="msg">Sure, no problem</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-06-18/383099788962_f8a3efa7488b02d0dfb8_72.png" /><div class="message"><div class="username">tjones</div><div class="time">2021-01-27 03:57</div><div class="msg">oh wait, I can't do it, because I don't have bash. Grr!</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-06-18/383099788962_f8a3efa7488b02d0dfb8_72.png" /><div class="message"><div class="username">tjones</div><div class="time">2021-01-27 03:57</div><div class="msg">@uglyog - can you kick off a release of V3 please?</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2019-08-26/740232217414_014b213119f6e40fa572_72.jpg" /><div class="message"><div class="username">uglyog</div><div class="time">2021-01-27 03:58</div><div class="msg">Current branch is in the middle of a change that not is not currently completed (build is broken too)</div></div></div><br/>
<div><img src="https://secure.gravatar.com/avatar/a2c1547d061f81b38aa8f59a948f9e09.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0006-72.png" /><div class="message"><div class="username">artur</div><div class="time">2021-01-27 03:59</div><div class="msg">ok, I saw your last commits and wandered if you are working on the async thing</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2019-08-26/740232217414_014b213119f6e40fa572_72.jpg" /><div class="message"><div class="username">uglyog</div><div class="time">2021-01-27 04:00</div><div class="msg">Yeah, and I think the current release process releases the HEAD commit. If we could release from your commit, that would be ideal</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2019-08-26/740232217414_014b213119f6e40fa572_72.jpg" /><div class="message"><div class="username">uglyog</div><div class="time">2021-01-27 04:00</div><div class="msg">Maybe a branch off your commit will work?</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2019-08-26/740232217414_014b213119f6e40fa572_72.jpg" /><div class="message"><div class="username">uglyog</div><div class="time">2021-01-27 04:01</div><div class="msg">I could also revert my commit</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2019-08-26/740232217414_014b213119f6e40fa572_72.jpg" /><div class="message"><div class="username">uglyog</div><div class="time">2021-01-27 04:02</div><div class="msg">Maybe that is the way to go</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-06-18/383099788962_f8a3efa7488b02d0dfb8_72.png" /><div class="message"><div class="username">tjones</div><div class="time">2021-01-27 04:12</div><div class="msg">This is a good question. We keep master releasable, do we want to do the same with the V3 branch?</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2019-08-26/740232217414_014b213119f6e40fa572_72.jpg" /><div class="message"><div class="username">uglyog</div><div class="time">2021-01-27 04:14</div><div class="msg">I really hate long running branches</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-06-18/383099788962_f8a3efa7488b02d0dfb8_72.png" /><div class="message"><div class="username">tjones</div><div class="time">2021-01-27 04:15</div><div class="msg">Yes.</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-06-18/383099788962_f8a3efa7488b02d0dfb8_72.png" /><div class="message"><div class="username">tjones</div><div class="time">2021-01-27 04:15</div><div class="msg">I'd like to merge V3 in, but there's a lot of work to do first</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2019-08-26/740232217414_014b213119f6e40fa572_72.jpg" /><div class="message"><div class="username">uglyog</div><div class="time">2021-01-27 04:17</div><div class="msg">I'll create short lived branches off the V3 one. I've already reverted the change from yesterday</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2019-08-26/740232217414_014b213119f6e40fa572_72.jpg" /><div class="message"><div class="username">uglyog</div><div class="time">2021-01-27 04:21</div><div class="msg">Ok, build is green. I'll trigger the release</div></div></div><br/>
<div><img src="https://secure.gravatar.com/avatar/a2c1547d061f81b38aa8f59a948f9e09.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0006-72.png" /><div class="message"><div class="username">artur</div><div class="time">2021-01-27 04:45</div><div class="msg">something seems to went  wrong, only the source code is there as assets</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2019-08-26/740232217414_014b213119f6e40fa572_72.jpg" /><div class="message"><div class="username">uglyog</div><div class="time">2021-01-27 04:48</div><div class="msg">Still building....</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2019-08-26/740232217414_014b213119f6e40fa572_72.jpg" /><div class="message"><div class="username">uglyog</div><div class="time">2021-01-27 04:48</div><div class="msg"><a href="https://github.com/pact-foundation/pact-js/actions/runs/514110965">https://github.com/pact-foundation/pact-js/actions/runs/514110965</a></div></div></div><br/>
<div><img src="https://secure.gravatar.com/avatar/a2c1547d061f81b38aa8f59a948f9e09.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0006-72.png" /><div class="message"><div class="username">artur</div><div class="time">2021-01-27 04:48</div><div class="msg">ahh ok</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2019-08-26/740232217414_014b213119f6e40fa572_72.jpg" /><div class="message"><div class="username">uglyog</div><div class="time">2021-01-27 04:56</div><div class="msg">The Linux libs are built</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-06-18/383099788962_f8a3efa7488b02d0dfb8_72.png" /><div class="message"><div class="username">tjones</div><div class="time">2021-01-27 05:47</div><div class="msg">Hmm. Should we do those in the other order?</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-06-18/383099788962_f8a3efa7488b02d0dfb8_72.png" /><div class="message"><div class="username">tjones</div><div class="time">2021-01-27 05:47</div><div class="msg">So that you can't install the package before it's ready?</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-06-18/383099788962_f8a3efa7488b02d0dfb8_72.png" /><div class="message"><div class="username">tjones</div><div class="time">2021-01-27 05:48</div><div class="msg">Also, do you think it's worth extracting the wrapped pact core to another package?</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2019-08-26/740232217414_014b213119f6e40fa572_72.jpg" /><div class="message"><div class="username">uglyog</div><div class="time">2021-01-27 05:55</div><div class="msg">The problem is the NPM package is published first. It should be last.</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2019-08-26/740232217414_014b213119f6e40fa572_72.jpg" /><div class="message"><div class="username">uglyog</div><div class="time">2021-01-27 05:55</div><div class="msg">wrapped pact core?</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2019-08-26/740232217414_014b213119f6e40fa572_72.jpg" /><div class="message"><div class="username">uglyog</div><div class="time">2021-01-27 05:55</div><div class="msg">The pact-node stuff?</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-06-18/383099788962_f8a3efa7488b02d0dfb8_72.png" /><div class="message"><div class="username">tjones</div><div class="time">2021-01-27 06:15</div><div class="msg">no, the `native` stuff</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-06-18/383099788962_f8a3efa7488b02d0dfb8_72.png" /><div class="message"><div class="username">tjones</div><div class="time">2021-01-27 06:15</div><div class="msg">the stuff that exposes the pact core to javascript</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-06-18/383099788962_f8a3efa7488b02d0dfb8_72.png" /><div class="message"><div class="username">tjones</div><div class="time">2021-01-27 06:17</div><div class="msg">While we're on it, the scripts are still publishing the release as a full release, not a beta</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-06-18/383099788962_f8a3efa7488b02d0dfb8_72.png" /><div class="message"><div class="username">tjones</div><div class="time">2021-01-27 06:17</div><div class="msg">I thought we solved that :confused:</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-06-18/383099788962_f8a3efa7488b02d0dfb8_72.png" /><div class="message"><div class="username">tjones</div><div class="time">2021-01-27 06:18</div><div class="msg">I've edited the release manually</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2019-08-26/740232217414_014b213119f6e40fa572_72.jpg" /><div class="message"><div class="username">uglyog</div><div class="time">2021-01-27 06:20</div><div class="msg">I'll need to investigate if it can be separate. Neon's default is to be alongside the JS code</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2019-08-26/740232217414_014b213119f6e40fa572_72.jpg" /><div class="message"><div class="username">uglyog</div><div class="time">2021-01-27 06:21</div><div class="msg">I need to check what it's build process does</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /><div class="message"><div class="username">matt.fellows</div><div class="time">2021-01-27 06:31</div><div class="msg">@tjones looks like you?re messing with pact builds. I?ve just pushed a minor change into pact js to fix an issue with types somebody reported to me. It?s not a widespread issue, but easy enough to sort out. Will you be releasing pact js (master) today?</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-06-18/383099788962_f8a3efa7488b02d0dfb8_72.png" /><div class="message"><div class="username">tjones</div><div class="time">2021-01-27 06:34</div><div class="msg">I don't think so. Do you want me to?</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-06-18/383099788962_f8a3efa7488b02d0dfb8_72.png" /><div class="message"><div class="username">tjones</div><div class="time">2021-01-27 06:34</div><div class="msg">I'm trying to work out how to get bash to work for releases from windows :disappointed:</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /><div class="message"><div class="username">matt.fellows</div><div class="time">2021-01-27 06:35</div><div class="msg">all good, i?ll attempt it shortly then</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2019-08-26/740232217414_014b213119f6e40fa572_72.jpg" /><div class="message"><div class="username">uglyog</div><div class="time">2021-01-27 06:35</div><div class="msg">Install Git for Windows, it comes with Bash</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /><div class="message"><div class="username">matt.fellows</div><div class="time">2021-01-27 06:35</div><div class="msg">wish me luck - putting those new notes to work</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /><div class="message"><div class="username">matt.fellows</div><div class="time">2021-01-27 06:36</div><div class="msg">(I used to use Commander, but I thought the new WSL had a better shell in it)</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-06-18/383099788962_f8a3efa7488b02d0dfb8_72.png" /><div class="message"><div class="username">tjones</div><div class="time">2021-01-27 06:36</div><div class="msg">I'm trying to release pact-node now</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /><div class="message"><div class="username">matt.fellows</div><div class="time">2021-01-27 06:41</div><div class="msg">the trigger release script failed for me, I think the `sed` matching doesn?t work</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /><div class="message"><div class="username">matt.fellows</div><div class="time">2021-01-27 06:41</div><div class="msg">in assumes the use of SSH. I?ll make a note of that</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-06-18/383099788962_f8a3efa7488b02d0dfb8_72.png" /><div class="message"><div class="username">tjones</div><div class="time">2021-01-27 06:43</div><div class="msg">Hm. It failed for me on Windows too, except actually it succeeded</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /><div class="message"><div class="username">matt.fellows</div><div class="time">2021-01-27 06:43</div><div class="msg">lol</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /><div class="message"><div class="username">matt.fellows</div><div class="time">2021-01-27 06:44</div><div class="msg">just checked, it didn?t suceed</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-06-18/383099788962_f8a3efa7488b02d0dfb8_72.png" /><div class="message"><div class="username">tjones</div><div class="time">2021-01-27 06:44</div><div class="msg">Yeah, if it can?t figure out what repo I guess it will fail</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-06-18/383099788962_f8a3efa7488b02d0dfb8_72.png" /><div class="message"><div class="username">tjones</div><div class="time">2021-01-27 06:44</div><div class="msg">I cribbed it from the ruby builds and didn?t read too carefully</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /><div class="message"><div class="username">matt.fellows</div><div class="time">2021-01-27 06:45</div><div class="msg">I?d have done the same</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-06-18/383099788962_f8a3efa7488b02d0dfb8_72.png" /><div class="message"><div class="username">tjones</div><div class="time">2021-01-27 06:46</div><div class="msg">I can trigger it now if you need</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-06-18/383099788962_f8a3efa7488b02d0dfb8_72.png" /><div class="message"><div class="username">tjones</div><div class="time">2021-01-27 06:46</div><div class="msg">since it seems pact-node released</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-06-18/383099788962_f8a3efa7488b02d0dfb8_72.png" /><div class="message"><div class="username">tjones</div><div class="time">2021-01-27 06:47</div><div class="msg">Also: the next pact-js windows build should pass the tests.</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /><div class="message"><div class="username">matt.fellows</div><div class="time">2021-01-27 06:47</div><div class="msg">amazing!</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-06-18/383099788962_f8a3efa7488b02d0dfb8_72.png" /><div class="message"><div class="username">tjones</div><div class="time">2021-01-27 06:47</div><div class="msg">Or at least, should not fail in the same place</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /><div class="message"><div class="username">matt.fellows</div><div class="time">2021-01-27 06:47</div><div class="msg">hahaha</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /><div class="message"><div class="username">matt.fellows</div><div class="time">2021-01-27 06:47</div><div class="msg">if you could please release latest master (i pushed a small change) that?d be ace</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /><div class="message"><div class="username">matt.fellows</div><div class="time">2021-01-27 06:47</div><div class="msg">I?m getting a `404`</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /><div class="message"><div class="username">matt.fellows</div><div class="time">2021-01-27 06:48</div><div class="msg">```?  pact-js git:(master) ? ./scripts/trigger-release.sh
Note: Unnecessary use of -X or --request, POST is already inferred.
*   Trying 52.63.231.178...
* TCP_NODELAY set
* Connected to <a href="http://api.github.com">http://api.github.com</a> (52.63.231.178) port 443 (#0)
* ALPN, offering h2
* ALPN, offering http/1.1
* successfully set certificate verify locations:
*   CAfile: /etc/ssl/cert.pem
  CApath: none
* TLSv1.2 (OUT), TLS handshake, Client hello (1):
* TLSv1.2 (IN), TLS handshake, Server hello (2):
* TLSv1.2 (IN), TLS handshake, Certificate (11):
* TLSv1.2 (IN), TLS handshake, Server key exchange (12):
* TLSv1.2 (IN), TLS handshake, Server finished (14):
* TLSv1.2 (OUT), TLS handshake, Client key exchange (16):
* TLSv1.2 (OUT), TLS change cipher, Change cipher spec (1):
* TLSv1.2 (OUT), TLS handshake, Finished (20):
* TLSv1.2 (IN), TLS change cipher, Change cipher spec (1):
* TLSv1.2 (IN), TLS handshake, Finished (20):
* SSL connection using TLSv1.2 / ECDHE-RSA-AES128-GCM-SHA256
* ALPN, server accepted to use h2
* Server certificate:
*  subject: C=US; ST=California; L=San Francisco; O=GitHub, Inc.; CN=*.<a href="http://github.com">http://github.com</a>
*  start date: Jun 22 00:00:00 2020 GMT
*  expire date: Aug 17 12:00:00 2022 GMT
*  subjectAltName: host "<a href="http://api.github.com">http://api.github.com</a>" matched cert's "*.<a href="http://github.com">http://github.com</a>"
*  issuer: C=US; O=DigiCert Inc; OU=<a href="http://www.digicert.com">http://www.digicert.com</a>; CN=DigiCert SHA2 High Assurance Server CA
*  SSL certificate verify ok.
* Using HTTP2, server supports multi-use
* Connection state changed (HTTP/2 confirmed)
* Copying HTTP/2 data in stream buffer to connection buffer after upgrade: len=0
* Using Stream ID: 1 (easy handle 0x7fa413809000)
&gt; POST /repos/github.com/pact-foundation/pact-js/dispatches HTTP/2
&gt; Host: <a href="http://api.github.com">http://api.github.com</a>
&gt; User-Agent: curl/7.64.1
&gt; Accept: application/vnd.github.everest-preview+json
&gt; Authorization: Bearer *********redacted********************
&gt; Content-Length: 35
&gt; Content-Type: application/x-www-form-urlencoded
&gt;
* We are completely uploaded and fine
* Connection state changed (MAX_CONCURRENT_STREAMS == 100)!
&lt; HTTP/2 404
&lt; date: Wed, 27 Jan 2021 06:46:18 GMT
&lt; content-type: application/json; charset=utf-8
&lt; content-length: 84
&lt; server: <a href="http://GitHub.com">http://GitHub.com</a>
&lt; status: 404 Not Found
&lt; x-oauth-scopes: repo, workflow
&lt; x-accepted-oauth-scopes: repo
&lt; x-github-media-type: github.v3; param=everest-preview; format=json
&lt; x-ratelimit-limit: 5000
&lt; x-ratelimit-remaining: 4991
&lt; x-ratelimit-reset: 1611732543
&lt; x-ratelimit-used: 9
&lt; access-control-expose-headers: ETag, Link, Location, Retry-After, X-GitHub-OTP, X-RateLimit-Limit, X-RateLimit-Remaining, X-RateLimit-Used, X-RateLimit-Reset, X-OAuth-Scopes, X-Accepted-OAuth-Scopes, X-Poll-Interval, X-GitHub-Media-Type, Deprecation, Sunset
&lt; access-control-allow-origin: *
&lt; strict-transport-security: max-age=31536000; includeSubdomains; preload
&lt; x-frame-options: deny
&lt; x-content-type-options: nosniff
&lt; x-xss-protection: 1; mode=block
&lt; referrer-policy: origin-when-cross-origin, strict-origin-when-cross-origin
&lt; content-security-policy: default-src 'none'
&lt; vary: Accept-Encoding, Accept, X-Requested-With
&lt; x-github-request-id: 1CC2:630A:316CD9:34C060:60110C3A
&lt;
{
  "message": "Not Found",
  "documentation_url": "<a href="https://docs.github.com/rest">https://docs.github.com/rest</a>"
}```</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /><div class="message"><div class="username">matt.fellows</div><div class="time">2021-01-27 06:48</div><div class="msg">ah, I see the problem</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /><div class="message"><div class="username">matt.fellows</div><div class="time">2021-01-27 06:49</div><div class="msg">done</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-06-18/383099788962_f8a3efa7488b02d0dfb8_72.png" /><div class="message"><div class="username">tjones</div><div class="time">2021-01-27 06:50</div><div class="msg">ah, we might have to bump the version of pact-node to 10.10.2</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /><div class="message"><div class="username">matt.fellows</div><div class="time">2021-01-27 06:50</div><div class="msg">can do</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /><div class="message"><div class="username">matt.fellows</div><div class="time">2021-01-27 06:50</div><div class="msg">I?ll cancel the workflow now</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-06-18/383099788962_f8a3efa7488b02d0dfb8_72.png" /><div class="message"><div class="username">tjones</div><div class="time">2021-01-27 06:50</div><div class="msg">neat</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /><div class="message"><div class="username">matt.fellows</div><div class="time">2021-01-27 06:51</div><div class="msg">did you mean `10.11.2`? (just checking)</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-06-18/383099788962_f8a3efa7488b02d0dfb8_72.png" /><div class="message"><div class="username">tjones</div><div class="time">2021-01-27 06:53</div><div class="msg">er yeah probably</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /><div class="message"><div class="username">matt.fellows</div><div class="time">2021-01-27 06:53</div><div class="msg">:slightly_smiling_face:</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /><div class="message"><div class="username">matt.fellows</div><div class="time">2021-01-27 07:10</div><div class="msg">FYI it failed, but just on a call so can?t debug yet: <a href="https://github.com/pact-foundation/pact-js/runs/1774885243?check_suite_focus=true">https://github.com/pact-foundation/pact-js/runs/1774885243?check_suite_focus=true</a></div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-06-18/383099788962_f8a3efa7488b02d0dfb8_72.png" /><div class="message"><div class="username">tjones</div><div class="time">2021-01-27 07:33</div><div class="msg">I can't tell either. Might be related to the same issue I had with pact-node, which is that github actions have an insecure world writeable directory, and Ruby complains</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-06-18/383099788962_f8a3efa7488b02d0dfb8_72.png" /><div class="message"><div class="username">tjones</div><div class="time">2021-01-27 07:33</div><div class="msg">There's a script in pact-node that sorts it out, but really we should make sure that we swallow and warn about this error, but don't fail execution</div></div></div><br/>
<div><img src="https://secure.gravatar.com/avatar/1bc78b46e2d01c7311d205a35c4d5e18.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0003-72.png" /><div class="message"><div class="username">brendan.donegan</div><div class="time">2021-01-27 09:04</div><div class="msg">{{}} seems good</div></div></div><br/>
<div><img src="https://secure.gravatar.com/avatar/1bc78b46e2d01c7311d205a35c4d5e18.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0003-72.png" /><div class="message"><div class="username">brendan.donegan</div><div class="time">2021-01-27 09:05</div><div class="msg">one question, why wouldn?t you just make the first argument a string which is going to be the name and have the templating be an implementation detail?</div></div></div><br/>
<div><img src="https://secure.gravatar.com/avatar/1bc78b46e2d01c7311d205a35c4d5e18.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0003-72.png" /><div class="message"><div class="username">brendan.donegan</div><div class="time">2021-01-27 09:05</div><div class="msg">fromProviderState(?myValue?, 100)</div></div></div><br/>
<div><img src="https://secure.gravatar.com/avatar/1bc78b46e2d01c7311d205a35c4d5e18.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0003-72.png" /><div class="message"><div class="username">brendan.donegan</div><div class="time">2021-01-27 09:07</div><div class="msg">Let me rephrase my question. I would like to use a value taken from the provider state in the path:, is this possible at the moment?</div></div></div><br/>
<div><img src="https://secure.gravatar.com/avatar/a2c1547d061f81b38aa8f59a948f9e09.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0006-72.png" /><div class="message"><div class="username">artur</div><div class="time">2021-01-27 09:20</div><div class="msg">CI currently fails <a href="https://github.com/pact-foundation/pact-js/pull/591/checks?check_run_id=1775520262">https://github.com/pact-foundation/pact-js/pull/591/checks?check_run_id=1775520262</a>
any idea why?</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /><div class="message"><div class="username">matt.fellows</div><div class="time">2021-01-27 11:18</div><div class="msg">yeah. I don?t believe it?s a fatal issue as far as the binary is concerned</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /><div class="message"><div class="username">matt.fellows</div><div class="time">2021-01-27 11:39</div><div class="msg">I?m wondering if support for query strings has changed recently in the underlying Ruby binaries</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /><div class="message"><div class="username">matt.fellows</div><div class="time">2021-01-27 11:39</div><div class="msg">the CI error we?re seeing is related to a very old example</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /><div class="message"><div class="username">matt.fellows</div><div class="time">2021-01-27 11:39</div><div class="msg">```E, [2021-01-27T22:38:04.829205 #15023] ERROR -- : No matching interaction found for GET /cats?catId[]=2&amp;catId[]=3
E, [2021-01-27T22:38:04.829228 #15023] ERROR -- : Interaction diffs for that route:
E, [2021-01-27T22:38:04.829675 #15023] ERROR -- : Diff with interaction: "a request for cats with given catId" given "i have a list of cats"
Diff
--------------------------------------
Key: - is expected
     + is actual
Matching keys and values are not shown

 {
   "query": {
-    "catId[]": [
-      "1",
+    "catId": [
+      "2",
+      "3"
     ]
   }
 }

Description of differences
--------------------------------------
* Could not find key "catId[]" (keys present are: catId) at $.query
* Did not expect the key "catId" to exist at $.query

W, [2021-01-27T22:38:04.836258 #15023]  WARN -- : Verifying - actual interactions do not match expected interactions.
Incorrect requests:
	GET /cats?catId[]=2&amp;catId[]=3 (request query did not match)


W, [2021-01-27T22:38:04.836304 #15023]  WARN -- : Incorrect requests:
	GET /cats?catId[]=2&amp;catId[]=3 (request query did not match)```</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /><div class="message"><div class="username">matt.fellows</div><div class="time">2021-01-27 11:41</div><div class="msg">You can see the incoming request has the key `catId[]..` but then it is normalised in the diff</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /><div class="message"><div class="username">matt.fellows</div><div class="time">2021-01-27 12:09</div><div class="msg">Yep, just confirmed `10.11.1` works, but `10.11.2` fails</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /><div class="message"><div class="username">matt.fellows</div><div class="time">2021-01-27 12:25</div><div class="msg">Cool, build is passing now</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /><div class="message"><div class="username">matt.fellows</div><div class="time">2021-01-27 12:56</div><div class="msg">Love this @tjones</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /><div class="message"><div class="username">matt.fellows</div><div class="time">2021-01-27 12:56</div><div class="msg">And @artur</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-06-18/383099788962_f8a3efa7488b02d0dfb8_72.png" /><div class="message"><div class="username">tjones</div><div class="time">2021-01-27 12:59</div><div class="msg">I like this much better. I?ll look at adding that later this week</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2019-08-26/740232217414_014b213119f6e40fa572_72.jpg" /><div class="message"><div class="username">uglyog</div><div class="time">2021-01-27 21:47</div><div class="msg">A string will work, but for things like paths, you need something more like "/users/${id}/orders/${orderId}"</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2019-08-26/740232217414_014b213119f6e40fa572_72.jpg" /><div class="message"><div class="username">uglyog</div><div class="time">2021-01-27 22:02</div><div class="msg">The provider state callback should be returning a key/value map. You use the keys to lookup the values. You can use them in the path using an expression like "/users/${id}/orders/${orderId}". For that example, the map returned should have an `id` and `orderId` entry in the map.</div></div></div><br/>
<div><img src="https://secure.gravatar.com/avatar/a2c1547d061f81b38aa8f59a948f9e09.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0006-72.png" /><div class="message"><div class="username">artur</div><div class="time">2021-01-28 05:18</div><div class="msg">@tjones do you want me to change the example in this PR? <a href="https://github.com/pact-foundation/pact-js/pull/590">https://github.com/pact-foundation/pact-js/pull/590</a></div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-06-18/383099788962_f8a3efa7488b02d0dfb8_72.png" /><div class="message"><div class="username">tjones</div><div class="time">2021-01-28 07:01</div><div class="msg">Ah, sorry, I wasn't clear. Yes please, if it's alright. The rationale is that we get a lot of questions from confused users, so I want to keep the examples as close to real as possible</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-06-18/383099788962_f8a3efa7488b02d0dfb8_72.png" /><div class="message"><div class="username">tjones</div><div class="time">2021-01-28 07:01</div><div class="msg">You'd be surprised what parts of "your real implementation here" end up in code that comes back with questions</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-06-18/383099788962_f8a3efa7488b02d0dfb8_72.png" /><div class="message"><div class="username">tjones</div><div class="time">2021-01-28 07:05</div><div class="msg">@artur Good pickups on this one! Much appreciated.</div></div></div><br/>
<div><img src="https://secure.gravatar.com/avatar/a2c1547d061f81b38aa8f59a948f9e09.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0006-72.png" /><div class="message"><div class="username">artur</div><div class="time">2021-01-28 07:05</div><div class="msg">welcome</div></div></div><br/>
<div><img src="https://secure.gravatar.com/avatar/a2c1547d061f81b38aa8f59a948f9e09.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0006-72.png" /><div class="message"><div class="username">artur</div><div class="time">2021-01-28 07:06</div><div class="msg">but that not gonna solve the current CI issues I guess, or?</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-06-18/383099788962_f8a3efa7488b02d0dfb8_72.png" /><div class="message"><div class="username">tjones</div><div class="time">2021-01-28 07:06</div><div class="msg">So, github actions is currently broken (right after we migrated to it, lol), but we're close to solving the windows build issues.</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-06-18/383099788962_f8a3efa7488b02d0dfb8_72.png" /><div class="message"><div class="username">tjones</div><div class="time">2021-01-28 07:06</div><div class="msg">There are two problems:

1) GitHub Actions is down
2) The latest pact binary has some problems with query strings. Matt and Beth were looking at it today, I'm not sure where they got to</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-06-18/383099788962_f8a3efa7488b02d0dfb8_72.png" /><div class="message"><div class="username">tjones</div><div class="time">2021-01-28 07:07</div><div class="msg">But the latest binary solves the problem with certain ways to invoke pact message on windows, which means we should (finally!) have a green board</div></div></div><br/>
<div><img src="https://secure.gravatar.com/avatar/a2c1547d061f81b38aa8f59a948f9e09.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0006-72.png" /><div class="message"><div class="username">artur</div><div class="time">2021-01-28 07:20</div><div class="msg">yes I guess I followed not-so-good design from owncloud, they are using `format=...` everywhre <a href="https://doc.owncloud.com/server/10.6/developer_manual/core/apis/ocs/notifications/ocs-endpoint-v1.html#request-parameters">https://doc.owncloud.com/server/10.6/developer_manual/core/apis/ocs/notifications/ocs-endpoint-v1.html#request-parameters</a></div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-06-18/383099788962_f8a3efa7488b02d0dfb8_72.png" /><div class="message"><div class="username">tjones</div><div class="time">2021-01-28 07:22</div><div class="msg">I don't think it should be a blocker to merge, though</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-06-18/383099788962_f8a3efa7488b02d0dfb8_72.png" /><div class="message"><div class="username">tjones</div><div class="time">2021-01-28 07:23</div><div class="msg">I'd merge now, except it's not trivial to release while gh actions is down :joy:</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-06-18/383099788962_f8a3efa7488b02d0dfb8_72.png" /><div class="message"><div class="username">tjones</div><div class="time">2021-01-28 07:24</div><div class="msg">Also, that was fast!</div></div></div><br/>
<div><img src="https://secure.gravatar.com/avatar/a2c1547d061f81b38aa8f59a948f9e09.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0006-72.png" /><div class="message"><div class="username">artur</div><div class="time">2021-01-28 07:27</div><div class="msg">no, don't merge it. I'm not a fan of merging stuff with red CI, that does develop bad habits and then when you finally try to fix CI you find multiple issues stacked above each other</div></div></div><br/>
<div><img src="https://secure.gravatar.com/avatar/a2c1547d061f81b38aa8f59a948f9e09.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0006-72.png" /><div class="message"><div class="username">artur</div><div class="time">2021-01-28 07:28</div><div class="msg">actually GH actions seem to run, just a bit slow maybe <a href="https://github.com/pact-foundation/pact-js/pull/590/checks?check_run_id=1782129522">https://github.com/pact-foundation/pact-js/pull/590/checks?check_run_id=1782129522</a></div></div></div><br/>
<div><img src="https://secure.gravatar.com/avatar/a2c1547d061f81b38aa8f59a948f9e09.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0006-72.png" /><div class="message"><div class="username">artur</div><div class="time">2021-01-28 07:30</div><div class="msg">but the tests fail with the same issue like yesterday <a href="https://github.com/pact-foundation/pact-js/pull/590/checks?check_run_id=1782129502">https://github.com/pact-foundation/pact-js/pull/590/checks?check_run_id=1782129502</a></div></div></div><br/>
<div><img src="https://secure.gravatar.com/avatar/1bc78b46e2d01c7311d205a35c4d5e18.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0003-72.png" /><div class="message"><div class="username">brendan.donegan</div><div class="time">2021-01-28 09:17</div><div class="msg">I totally get what you?re saying now. Thanks</div></div></div><br/>
<div><img src="https://secure.gravatar.com/avatar/1bc78b46e2d01c7311d205a35c4d5e18.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0003-72.png" /><div class="message"><div class="username">brendan.donegan</div><div class="time">2021-01-28 09:19</div><div class="msg">I see what you mean. That?s ok - it might still be helpful to change the template to ?{{value}}? to avoid fighting with linters</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-06-18/383099788962_f8a3efa7488b02d0dfb8_72.png" /><div class="message"><div class="username">tjones</div><div class="time">2021-01-28 09:25</div><div class="msg">Then users can say something like

```path: `/users/${fromProviderState("id")}/orders/${fromProviderState("orderId")}````</div></div></div><br/>
<div><img src="https://secure.gravatar.com/avatar/1bc78b46e2d01c7311d205a35c4d5e18.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0003-72.png" /><div class="message"><div class="username">brendan.donegan</div><div class="time">2021-01-28 09:26</div><div class="msg">that also looks fine</div></div></div><br/>
<div><img src="https://secure.gravatar.com/avatar/1bc78b46e2d01c7311d205a35c4d5e18.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0003-72.png" /><div class="message"><div class="username">brendan.donegan</div><div class="time">2021-01-28 09:27</div><div class="msg">that?s what i was trying to do initially</div></div></div><br/>
<div><img src="https://secure.gravatar.com/avatar/1bc78b46e2d01c7311d205a35c4d5e18.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0003-72.png" /><div class="message"><div class="username">brendan.donegan</div><div class="time">2021-01-28 09:28</div><div class="msg">I had to this instead
```            path: fromProviderState(
              // eslint-disable-next-line prefer-template
              CLASS_ENDPOINT + '/${sectionRefId}',
              SECTION_REF_ID_1,
            ),```</div></div></div><br/>
<div><img src="https://secure.gravatar.com/avatar/a2c1547d061f81b38aa8f59a948f9e09.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0006-72.png" /><div class="message"><div class="username">artur</div><div class="time">2021-01-29 05:11</div><div class="msg">wohooo, green CI :man_dancing:</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-06-18/383099788962_f8a3efa7488b02d0dfb8_72.png" /><div class="message"><div class="username">tjones</div><div class="time">2021-01-29 05:18</div><div class="msg">Yes! Our fancy new green board is thanks to the concerted efforts of you @artur, @milanese.david, @bethskurrie and @matt.fellows . :taco: s for all!</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /><div class="message"><div class="username">matt.fellows</div><div class="time">2021-01-29 09:04</div><div class="msg">I claim nothing aside from raising an issue saying "let's move off Travis". Thanks folks, so grateful for your help!</div></div></div><br/>
<div><img src="https://secure.gravatar.com/avatar/a2c1547d061f81b38aa8f59a948f9e09.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0006-72.png" /><div class="message"><div class="username">artur</div><div class="time">2021-02-02 03:29</div><div class="msg">something went wrong with the beta29 build, only 2 assets (source code uploaded)</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2019-08-26/740232217414_014b213119f6e40fa572_72.jpg" /><div class="message"><div class="username">uglyog</div><div class="time">2021-02-02 03:35</div><div class="msg">Hmm, the GH action is not kicking off</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2019-08-26/740232217414_014b213119f6e40fa572_72.jpg" /><div class="message"><div class="username">uglyog</div><div class="time">2021-02-02 03:36</div><div class="msg">Ok, I've kicked it off</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2019-08-26/740232217414_014b213119f6e40fa572_72.jpg" /><div class="message"><div class="username">uglyog</div><div class="time">2021-02-02 03:37</div><div class="msg">Need to work out why it is not starting when the release is created</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /><div class="message"><div class="username">matt.fellows</div><div class="time">2021-02-02 03:41</div><div class="msg">Probably me. I tried releasing it the other day using the script. I think it needed manual version updating so I probably am to blame</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /><div class="message"><div class="username">matt.fellows</div><div class="time">2021-02-02 03:41</div><div class="msg">Thanks Ron</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2019-08-26/740232217414_014b213119f6e40fa572_72.jpg" /><div class="message"><div class="username">uglyog</div><div class="time">2021-02-02 03:42</div><div class="msg">No, it is something about how the release is created. It's not triggering the right event</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /><div class="message"><div class="username">matt.fellows</div><div class="time">2021-02-02 03:43</div><div class="msg">Phew</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-06-18/383099788962_f8a3efa7488b02d0dfb8_72.png" /><div class="message"><div class="username">tjones</div><div class="time">2021-02-02 05:44</div><div class="msg">It's also still releasing as a release rather than a prerelease</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2019-08-26/740232217414_014b213119f6e40fa572_72.jpg" /><div class="message"><div class="username">uglyog</div><div class="time">2021-02-02 05:52</div><div class="msg">Oh, that might have been me when I edited the release to get it to kick off. Sorry.</div></div></div><br/>
<div><img src="https://secure.gravatar.com/avatar/1bc78b46e2d01c7311d205a35c4d5e18.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0003-72.png" /><div class="message"><div class="username">brendan.donegan</div><div class="time">2021-02-03 11:00</div><div class="msg">I?m curious - is there a timeframe for when Pact v3 is going to be officially released? I?m struggling a bit to come up with a way to have Pact v2 and v3 Co-exist in our repo in a way that isn?t confusing to our engineers, so would prefer to switch over wholesale at some point</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /><div class="message"><div class="username">matt.fellows</div><div class="time">2021-02-04 01:26</div><div class="msg">First quarter this year is the goal. But I see no reason to _not_ have it merged into master rather soon, and released alongside the current (let?s call it v2) package (this way you don?t need to install 2 deps). Would that help your situation?</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-06-18/383099788962_f8a3efa7488b02d0dfb8_72.png" /><div class="message"><div class="username">tjones</div><div class="time">2021-02-04 05:33</div><div class="msg">@matt.fellows: I'd like to overhaul the interface before we do that. We can get them closer to each other</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-06-18/383099788962_f8a3efa7488b02d0dfb8_72.png" /><div class="message"><div class="username">tjones</div><div class="time">2021-02-04 05:34</div><div class="msg">Also, I'm still unclear on what is remaining to do before it is switched over (other than cleanup the types). Is there a list?</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-06-18/383099788962_f8a3efa7488b02d0dfb8_72.png" /><div class="message"><div class="username">tjones</div><div class="time">2021-02-04 05:34</div><div class="msg">The issue seems out of date</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-06-18/383099788962_f8a3efa7488b02d0dfb8_72.png" /><div class="message"><div class="username">tjones</div><div class="time">2021-02-04 05:42</div><div class="msg">@matt.fellows: Been thinking about the windows long path issue. What if we mitigated it slightly by extracting to eg `lib/` instead of `standalone/`?  Also, we could name the win32 directory something like `w/`, maybe</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2020-12-21/1590248611698_a9ff06126dea1ae5590e_72.png" /><div class="message"><div class="username">omer.moradd</div><div class="time">2021-02-04 06:21</div><div class="msg">has joined #pact-js-development</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2020-12-21/1590248611698_a9ff06126dea1ae5590e_72.png" /><div class="message"><div class="username">omer.moradd</div><div class="time">2021-02-04 06:31</div><div class="msg">Hi

Tim and I having a conversation about how to manage the JavaScript packages and I would like to suggest the following idea - to concentrate all the JavaScript related packages in one place which is basically a Monorepo; And to be more specific then Monorepo with the use of Lerna.

Why Monorepo?
1. Single source of truth
2. No need to maintain so many different repositories.
3. Version management becomes super easy (using Lerna+Changesets / Lerna+Changelog) - can also add conventional commits
4. Easier local development - you can create links between all the packages and thus make sure that each package that depends on another does not break anything
5. Common and uniform processes like linting for example
6. No need to maintain a pipeline for each package separately, it is possible to have one main pipeline for all packages and Lerna will already take care of making the work easy in everything related to testing, building and publication only of what has changed what the last commit

I would love to hear what you think :slightly_smiling_face:</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2020-12-21/1590248611698_a9ff06126dea1ae5590e_72.png" /><div class="message"><div class="username">omer.moradd</div><div class="time">2021-02-04 06:31</div><div class="msg">@tjones</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-06-18/383099788962_f8a3efa7488b02d0dfb8_72.png" /><div class="message"><div class="username">tjones</div><div class="time">2021-02-04 06:35</div><div class="msg">My thoughts are that I'm not sure it would solve any current problems, and would introduce new complexity into the build process</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-06-18/383099788962_f8a3efa7488b02d0dfb8_72.png" /><div class="message"><div class="username">tjones</div><div class="time">2021-02-04 06:35</div><div class="msg">For example, version management is already super easy with standard-version</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-06-18/383099788962_f8a3efa7488b02d0dfb8_72.png" /><div class="message"><div class="username">tjones</div><div class="time">2021-02-04 06:36</div><div class="msg">@matt.fellows: I figured out why neither of our branches running npm link on appveyor were merged - npm link doesn't seem to work on appveyor. We're doing it correctly for windows, it works locally</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-06-18/383099788962_f8a3efa7488b02d0dfb8_72.png" /><div class="message"><div class="username">tjones</div><div class="time">2021-02-04 06:36</div><div class="msg">My thinking is that maybe the appveyor builds aren't run as administrator, which is required for npm link to work?</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2020-12-21/1590248611698_a9ff06126dea1ae5590e_72.png" /><div class="message"><div class="username">omer.moradd</div><div class="time">2021-02-04 06:38</div><div class="msg">Actually Lerna is taking care of everything :slightly_smiling_face: including the build process and the publishing</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2020-12-21/1590248611698_a9ff06126dea1ae5590e_72.png" /><div class="message"><div class="username">omer.moradd</div><div class="time">2021-02-04 06:39</div><div class="msg">So I can guarantee it won?t add a new complexity
I think we should make a POC and see how it works :)</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-06-18/383099788962_f8a3efa7488b02d0dfb8_72.png" /><div class="message"><div class="username">tjones</div><div class="time">2021-02-04 06:39</div><div class="msg">New complexity as in a new tool</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-06-18/383099788962_f8a3efa7488b02d0dfb8_72.png" /><div class="message"><div class="username">tjones</div><div class="time">2021-02-04 06:40</div><div class="msg">at the moment, you can download and `npm install`</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-06-18/383099788962_f8a3efa7488b02d0dfb8_72.png" /><div class="message"><div class="username">tjones</div><div class="time">2021-02-04 06:40</div><div class="msg">whereas with lerna, you can't</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-06-18/383099788962_f8a3efa7488b02d0dfb8_72.png" /><div class="message"><div class="username">tjones</div><div class="time">2021-02-04 06:40</div><div class="msg">(sure, there's a different command, but for node developers who don't know lerna, there's new things. At the moment, there isn't)</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-06-18/383099788962_f8a3efa7488b02d0dfb8_72.png" /><div class="message"><div class="username">tjones</div><div class="time">2021-02-04 06:41</div><div class="msg">Sure, a POC would be nice, but at the moment I don't see what problem it solves</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-06-18/383099788962_f8a3efa7488b02d0dfb8_72.png" /><div class="message"><div class="username">tjones</div><div class="time">2021-02-04 06:41</div><div class="msg">we can already do all of the things on the list</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2020-12-21/1590248611698_a9ff06126dea1ae5590e_72.png" /><div class="message"><div class="username">omer.moradd</div><div class="time">2021-02-04 06:42</div><div class="msg">Yes there is a learning curve</div></div></div><br/>
<div><img src="https://secure.gravatar.com/avatar/a2c1547d061f81b38aa8f59a948f9e09.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0006-72.png" /><div class="message"><div class="username">artur</div><div class="time">2021-02-04 06:45</div><div class="msg">are `Before/After hooks`  already implemented in V3? the box is ticked in <a href="https://github.com/pact-foundation/pact-js/issues/413">https://github.com/pact-foundation/pact-js/issues/413</a> but I cannot find any code in <a href="https://github.com/pact-foundation/pact-js/blob/feat/v3.0.0/src/v3/verifier.ts">https://github.com/pact-foundation/pact-js/blob/feat/v3.0.0/src/v3/verifier.ts</a></div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-06-18/383099788962_f8a3efa7488b02d0dfb8_72.png" /><div class="message"><div class="username">tjones</div><div class="time">2021-02-04 06:47</div><div class="msg">Oh! I know this one. They're implemented with the boolean on the setup function (true when it is setup, I think?). I'd like to swap this for:

```type stateFunc = 
  | (params) =&gt; Promise&lt;unknown&gt; 
  | { 
      setup: (params) =&gt; Promise&lt;unknown&gt;;
      teardown: (params) =&gt; Promise&lt;unknown&gt;
    }```</div></div></div><br/>
<div><img src="https://secure.gravatar.com/avatar/a2c1547d061f81b38aa8f59a948f9e09.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0006-72.png" /><div class="message"><div class="username">artur</div><div class="time">2021-02-04 06:48</div><div class="msg">are you talking about the stateHandlers?</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-06-18/383099788962_f8a3efa7488b02d0dfb8_72.png" /><div class="message"><div class="username">tjones</div><div class="time">2021-02-04 06:51</div><div class="msg">I agree with the advantages you've listed, but to me a monorepo is just one way of implementing those advantages. I don't think moving to a monorepo would solve or improve any problems we currently have:

1) We don't currently have multiple sources of truth. We do have a discoverability challenge whereby you might not know about some js repos, but I don't think that's a problem (and it's easily solved with documentation)

2) I don't think maintaining multiple repos is a problem (or, if it is, solving it seems not worth increasing the learning curve for contributors)

3) Version management is already well solved for the pact projects, We have automated releases and changelogs, and I'm not aware of any pain points.

4) Usually we don't have a problem with changes across multiple projects. The biggest challenge is between pact-node and pact-js, and `npm link` solves this for local development (this also runs automatically in CI for the example repos, so they act as an integration test, kinda)

5) Yes, making lint and formatting uniform would be nice. I don't think it's really costing us, though (and a shared lint package would solve this without the need for a monorepo).

6) Again, I'm not sure this is really costing us. If we want a common pipeline, we could build it without needing a monorepo (I've been thinking of following the pattern used for the ruby gem releases)</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-06-18/383099788962_f8a3efa7488b02d0dfb8_72.png" /><div class="message"><div class="username">tjones</div><div class="time">2021-02-04 06:52</div><div class="msg">I appreciate the enthusiasm to give it a go, and if you feel strongly, feel free to spike it out - but I reckon that there are bigger fish (like fixing up the v3 interface or improving the way we do config) that would be more valuable</div></div></div><br/>
<div><img src="https://secure.gravatar.com/avatar/a2c1547d061f81b38aa8f59a948f9e09.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0006-72.png" /><div class="message"><div class="username">artur</div><div class="time">2021-02-04 06:53</div><div class="msg">if the statehandler does a change on the server I revert it again in the state handler. But what if the interaction itself does a change on the server that should be reverted afterwards?
I could use also a stateHandler for that, but looks strange and ugly
`.given('the directory is deleted after the interaction')`
or
`.given('afterHook')`</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-06-18/383099788962_f8a3efa7488b02d0dfb8_72.png" /><div class="message"><div class="username">tjones</div><div class="time">2021-02-04 06:54</div><div class="msg">There's another thing worth considering, which is moving to a monorepo would mean we obscure the commit history. This is the same reason I haven't standardised the formatting between pact-node and pact-js.</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2020-12-21/1590248611698_a9ff06126dea1ae5590e_72.png" /><div class="message"><div class="username">omer.moradd</div><div class="time">2021-02-04 06:56</div><div class="msg">All right, I?m probably not yet familiar with all the processes that are currently going on in development
If you feel it adds unnecessary work then it really is not urgent

What?s more, the history of the commits is really very valuable</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2019-08-26/740232217414_014b213119f6e40fa572_72.jpg" /><div class="message"><div class="username">uglyog</div><div class="time">2021-02-04 07:02</div><div class="msg">Just use the normal test before/after hooks. There is also a callback when the verification process is complete.</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-06-18/383099788962_f8a3efa7488b02d0dfb8_72.png" /><div class="message"><div class="username">tjones</div><div class="time">2021-02-04 07:02</div><div class="msg">One prerequisite before moving to a monorepo is that you can't currently check out `pact-node` and run `npm install` - because it wants to run the download script, which won't yet be compiled</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-06-18/383099788962_f8a3efa7488b02d0dfb8_72.png" /><div class="message"><div class="username">tjones</div><div class="time">2021-02-04 07:02</div><div class="msg">It would be good to fix that, but it turns out to be pretty fiddly</div></div></div><br/>
<div><img src="https://secure.gravatar.com/avatar/a2c1547d061f81b38aa8f59a948f9e09.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0006-72.png" /><div class="message"><div class="username">artur</div><div class="time">2021-02-04 07:05</div><div class="msg">the provider test is only one jest test with multiple interactions. So jest will run the afterEach only once I basically need a `afterEachInteraction`</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2019-08-26/740232217414_014b213119f6e40fa572_72.jpg" /><div class="message"><div class="username">uglyog</div><div class="time">2021-02-04 07:08</div><div class="msg">:thinking_face: makes sense</div></div></div><br/>
<div><img src="https://secure.gravatar.com/avatar/a2c1547d061f81b38aa8f59a948f9e09.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0006-72.png" /><div class="message"><div class="username">artur</div><div class="time">2021-02-04 07:08</div><div class="msg">or: `afterThisSpecificInteraction`</div></div></div><br/>
<div><img src="https://secure.gravatar.com/avatar/a2c1547d061f81b38aa8f59a948f9e09.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0006-72.png" /><div class="message"><div class="username">artur</div><div class="time">2021-02-04 07:09</div><div class="msg">OK here the idea: its only about naming, `given()` works just fine, if there would be an alias called `after()` the naming would be nicer</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-06-18/383099788962_f8a3efa7488b02d0dfb8_72.png" /><div class="message"><div class="username">tjones</div><div class="time">2021-02-04 07:09</div><div class="msg">I think in v3 you can have multiple states, right?</div></div></div><br/>
<div><img src="https://secure.gravatar.com/avatar/a2c1547d061f81b38aa8f59a948f9e09.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0006-72.png" /><div class="message"><div class="username">artur</div><div class="time">2021-02-04 07:09</div><div class="msg">I haven't tried that but I think yes</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-06-18/383099788962_f8a3efa7488b02d0dfb8_72.png" /><div class="message"><div class="username">tjones</div><div class="time">2021-02-04 07:10</div><div class="msg">So you don't know that the teardown for a state is the `after`</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-06-18/383099788962_f8a3efa7488b02d0dfb8_72.png" /><div class="message"><div class="username">tjones</div><div class="time">2021-02-04 07:10</div><div class="msg">@uglyog this feels like another argument for letting pact-js tell rust which interaction is ready to verify</div></div></div><br/>
<div><img src="https://secure.gravatar.com/avatar/a2c1547d061f81b38aa8f59a948f9e09.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0006-72.png" /><div class="message"><div class="username">artur</div><div class="time">2021-02-04 07:11</div><div class="msg">I know if its a setup or teardown by checking the `setup` variable</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2019-08-26/740232217414_014b213119f6e40fa572_72.jpg" /><div class="message"><div class="username">uglyog</div><div class="time">2021-02-04 07:11</div><div class="msg">That requires a fair bit of work. Maybe a version 2</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-06-18/383099788962_f8a3efa7488b02d0dfb8_72.png" /><div class="message"><div class="username">tjones</div><div class="time">2021-02-04 07:12</div><div class="msg">@artur Right, but you're tearing down that particular state, not running an afterEach</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-06-18/383099788962_f8a3efa7488b02d0dfb8_72.png" /><div class="message"><div class="username">tjones</div><div class="time">2021-02-04 07:12</div><div class="msg">unless you only have one state per interaction</div></div></div><br/>
<div><img src="https://secure.gravatar.com/avatar/a2c1547d061f81b38aa8f59a948f9e09.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0006-72.png" /><div class="message"><div class="username">artur</div><div class="time">2021-02-04 07:21</div><div class="msg">thinking about it, actually an afterEach is not what I need. I need an action to revert the effect of the interaction itself. I should be able to do that with the `given` even if I have multiple of them. A given can revert its own effect that it caused during setup or it cannot do anything in the setup phase and revert the effect of the interaction in the teardown phase (I would like to be able to call that `provider.after()` or simmilar
The only problem I can see is that I don't know the order of givens so if the reverting has to happen in a specific order I might be in trouble</div></div></div><br/>
<div><img src="https://secure.gravatar.com/avatar/a2c1547d061f81b38aa8f59a948f9e09.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0006-72.png" /><div class="message"><div class="username">artur</div><div class="time">2021-02-04 08:41</div><div class="msg">I've created a feature request <a href="https://github.com/pact-foundation/pact-js/issues/597">https://github.com/pact-foundation/pact-js/issues/597</a>
Would love to hear your input</div></div></div><br/>
<div><img src="https://secure.gravatar.com/avatar/1bc78b46e2d01c7311d205a35c4d5e18.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0003-72.png" /><div class="message"><div class="username">brendan.donegan</div><div class="time">2021-02-04 09:19</div><div class="msg">I?d like to feel confident it will be stable and their won?t be too many interface changes though - I unfortunately don?t have a lot of time to overhaul our Pact tests as changes are made, especially now we have a lot of them</div></div></div><br/>
<div><img src="https://secure.gravatar.com/avatar/a64731e1d8e2c05e2a2a2255e7cbdd12.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0006-72.png" /><div class="message"><div class="username">slack1</div><div class="time">2021-02-04 20:58</div><div class="msg">has joined #pact-js-development</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /><div class="message"><div class="username">matt.fellows</div><div class="time">2021-02-07 23:03</div><div class="msg">hmmm</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /><div class="message"><div class="username">matt.fellows</div><div class="time">2021-02-07 23:05</div><div class="msg">Sorry, a little late to this discussion. I?ve also suggesting looking into Lerna, but admittedly I have never used it so a shift would need to produce significant gains (and incremental gains for what looks to be a big effort, might better be used on other things - e.g. the v3 migration, API cleanup and various features people want!).

I?m not sure how big a learning curve Lerna is, if that?s the main counter argument though.</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /><div class="message"><div class="username">matt.fellows</div><div class="time">2021-02-07 23:05</div><div class="msg">Some other reasons why it could be good</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /><div class="message"><div class="username">matt.fellows</div><div class="time">2021-02-07 23:06</div><div class="msg">1. We already produce 3 packages from that repository (the new v3 beta release, pact-web and the existing package). It?s a bit clunky the way that?s currently setup, and having v3 in a long running branch is a risk for all of the obvious reasons</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /><div class="message"><div class="username">matt.fellows</div><div class="time">2021-02-07 23:07</div><div class="msg">2. whilst having multiple repos isn?t a huge burden, having to wait for upstream projects to build, release etc. is a small time overhead and it would be much nicer for pact-node and pact-js to co-locate</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-06-18/383099788962_f8a3efa7488b02d0dfb8_72.png" /><div class="message"><div class="username">tjones</div><div class="time">2021-02-08 07:30</div><div class="msg">I'm not sure having them in the same place would speed up build + releases - the problem would still exist</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-06-18/383099788962_f8a3efa7488b02d0dfb8_72.png" /><div class="message"><div class="username">tjones</div><div class="time">2021-02-08 07:31</div><div class="msg">I think the production of three packages from the repo is probably better treated by splitting out pact-web, and bringing the beta release into the main branch</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-06-18/383099788962_f8a3efa7488b02d0dfb8_72.png" /><div class="message"><div class="username">tjones</div><div class="time">2021-02-08 07:31</div><div class="msg">(but it's definitely not ready yet)</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /><div class="message"><div class="username">matt.fellows</div><div class="time">2021-02-08 08:48</div><div class="msg">I would share code and have pact JS not depend on pact node anymore, but still publish pact node for those who still want to use it without Pact JS (for whatever reasons)</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /><div class="message"><div class="username">matt.fellows</div><div class="time">2021-02-08 08:49</div><div class="msg">Agree in general, and the point about where to expend effort is one of the bigger considerations</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /><div class="message"><div class="username">matt.fellows</div><div class="time">2021-02-08 13:00</div><div class="msg">just back into this thread - so, how did you re-trigger the release Ron?</div></div></div><br/>
<div><img src="https://secure.gravatar.com/avatar/2a0a12bd7d7d48649723b7bc56eff15c.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0007-72.png" /><div class="message"><div class="username">alex.mccormick</div><div class="time">2021-02-08 18:33</div><div class="msg">has joined #pact-js-development</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2019-08-26/740232217414_014b213119f6e40fa572_72.jpg" /><div class="message"><div class="username">uglyog</div><div class="time">2021-02-09 00:43</div><div class="msg">Edit, add space, publish :smile:</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /><div class="message"><div class="username">matt.fellows</div><div class="time">2021-02-09 00:45</div><div class="msg">yeah that?s what I did</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /><div class="message"><div class="username">matt.fellows</div><div class="time">2021-02-09 00:46</div><div class="msg">I thought be checking the ?pre-release? box and then re-doing that, it would trigcger it. Apparently that?s not an ?edit?</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /><div class="message"><div class="username">matt.fellows</div><div class="time">2021-02-09 00:46</div><div class="msg">Also, because GH actions is weird, it didn?t show your trigger</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /><div class="message"><div class="username">matt.fellows</div><div class="time">2021-02-09 00:46</div><div class="msg">i.e. according to GH actions, these are the only 2 times that workflow has run - that lead me down a separate rabbit hole to figure out how you ran those bits</div></div></div><br/>
<div><img src="https://secure.gravatar.com/avatar/a2c1547d061f81b38aa8f59a948f9e09.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0006-72.png" /><div class="message"><div class="username">artur</div><div class="time">2021-02-09 03:42</div><div class="msg">there is a `master` release <a href="https://github.com/pact-foundation/pact-js/releases">https://github.com/pact-foundation/pact-js/releases</a>
is that intended?</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /><div class="message"><div class="username">matt.fellows</div><div class="time">2021-02-09 03:50</div><div class="msg">Thanks for reminding me. It seems that can be a funny side effect of a failed release</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /><div class="message"><div class="username">matt.fellows</div><div class="time">2021-02-09 03:50</div><div class="msg">Just deleted</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2019-04-24/606247929682_e52f292f55941b5e901a_72.jpg" /><div class="message"><div class="username">audun.halland</div><div class="time">2021-02-09 10:43</div><div class="msg">Hey, testing pact-js v3 again :slightly_smiling_face: latest beta. I have a test that completely stalls, no idea what?s going on (I also sometimes see a segfault). Is there some way to see native/Rust term debug while running a test through Jest?</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /><div class="message"><div class="username">matt.fellows</div><div class="time">2021-02-09 10:55</div><div class="msg">export or prefix `LOG_LEVEL=trace` to your tests</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /><div class="message"><div class="username">matt.fellows</div><div class="time">2021-02-09 10:56</div><div class="msg">Just check you haven?t sent a promise or something to the callbacks. I don?t think they support promises yet - maybe they just go into the ether?</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2019-04-24/606247929682_e52f292f55941b5e901a_72.jpg" /><div class="message"><div class="username">audun.halland</div><div class="time">2021-02-09 10:59</div><div class="msg">Well, I use `provider.executeTest(async (mockServer) =&gt; ...)`. I?m thinking that I won?t get very far with I/O in javascript without promises?</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2019-04-24/606247929682_e52f292f55941b5e901a_72.jpg" /><div class="message"><div class="username">audun.halland</div><div class="time">2021-02-09 10:59</div><div class="msg">Some of my tests work, others not.</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2019-04-24/606247929682_e52f292f55941b5e901a_72.jpg" /><div class="message"><div class="username">audun.halland</div><div class="time">2021-02-09 11:01</div><div class="msg">LOG_LEVEL works. The last Rust log line that I see is `[2021-02-09T11:00:22Z DEBUG pact_matching::models] Merging pact with file "pacts/foo-bar.json"`</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2019-04-24/606247929682_e52f292f55941b5e901a_72.jpg" /><div class="message"><div class="username">audun.halland</div><div class="time">2021-02-09 11:03</div><div class="msg">Just saw in the logs that there was a recent change related to locking the file, unsure whether it?s related</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2019-04-24/606247929682_e52f292f55941b5e901a_72.jpg" /><div class="message"><div class="username">audun.halland</div><div class="time">2021-02-09 11:17</div><div class="msg">I can induce the SIGSEGV by forcing a ?Request did not match pact? thing:
```[2021-02-09T11:15:11Z DEBUG pact_matching] --&gt; Mismatches: [BodyMismatch { path: "$.variables.slug", expected: Some(b"\"lol\""), actual: Some(b"\"movedFromHere\""), mismatch: "Expected \'lol\' to be equal to \'movedFromHere\'" }]
[2021-02-09T11:15:11Z DEBUG pact_mock_server::hyper_server] Request did not match: Request did not match - Request ( method: POST, path: /graphql, query: None, headers: Some({"Content-Type": ["application/json"]}), body: Present(1003 bytes, application/json) )    0) $.variables.slug -&gt; Expected 'lol' to be equal to 'movedFromHere'
error Command failed with signal "SIGSEGV".```</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2019-04-24/606247929682_e52f292f55941b5e901a_72.jpg" /><div class="message"><div class="username">audun.halland</div><div class="time">2021-02-09 11:19</div><div class="msg">Du you want me to instead report issues on GitHub or is it ok to just discuss it here?</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /><div class="message"><div class="username">matt.fellows</div><div class="time">2021-02-09 12:35</div><div class="msg">I think it?s just the state callbacks/filters that don?t support promises. But yes, JS === promises!!</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /><div class="message"><div class="username">matt.fellows</div><div class="time">2021-02-09 12:36</div><div class="msg">If you could please raise a GH issue that would be ace</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /><div class="message"><div class="username">matt.fellows</div><div class="time">2021-02-09 12:36</div><div class="msg">(sorry, about to head to bed and don?t  want it lost)</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2019-08-26/740232217414_014b213119f6e40fa572_72.jpg" /><div class="message"><div class="username">uglyog</div><div class="time">2021-02-10 02:13</div><div class="msg">What OS are you running?</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2019-08-26/740232217414_014b213119f6e40fa572_72.jpg" /><div class="message"><div class="username">uglyog</div><div class="time">2021-02-10 02:14</div><div class="msg">It has to be relating to the file lock, as it will block the process until the lock can be aquired.</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2019-08-26/740232217414_014b213119f6e40fa572_72.jpg" /><div class="message"><div class="username">uglyog</div><div class="time">2021-02-10 02:16</div><div class="msg">@matt.fellows I'm going to update the locking code to not block, but try acquire the lock with an backoff.</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /><div class="message"><div class="username">matt.fellows</div><div class="time">2021-02-10 02:27</div><div class="msg">That will give me a chance to test the updates to the JS release script :crossed_fingers:</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2019-08-26/740232217414_014b213119f6e40fa572_72.jpg" /><div class="message"><div class="username">uglyog</div><div class="time">2021-02-10 04:01</div><div class="msg">Can you double check the logic? All the tests are passing, but :man-shrugging:
<a href="https://github.com/pact-foundation/pact-reference/commit/f34629e19f7898a5722db2a288113b0b98b7e858">https://github.com/pact-foundation/pact-reference/commit/f34629e19f7898a5722db2a288113b0b98b7e858</a>
<a href="https://github.com/pact-foundation/pact-reference/commit/6f13f495a8cd849971be9d3be0d398a95adf14bc">https://github.com/pact-foundation/pact-reference/commit/6f13f495a8cd849971be9d3be0d398a95adf14bc</a></div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2019-04-24/606247929682_e52f292f55941b5e901a_72.jpg" /><div class="message"><div class="username">audun.halland</div><div class="time">2021-02-10 04:48</div><div class="msg">mac</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2019-04-24/606247929682_e52f292f55941b5e901a_72.jpg" /><div class="message"><div class="username">audun.halland</div><div class="time">2021-02-10 04:54</div><div class="msg">Will you require interprocess locking? If not, I suggest having a dedicated thread that has exclusive access to the pact file. Other threads can communicate with it by sending/receiving commands through channels, this will also avoid thread::sleep when you want to do pact file operations in async contexts</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2019-08-26/740232217414_014b213119f6e40fa572_72.jpg" /><div class="message"><div class="username">uglyog</div><div class="time">2021-02-10 05:01</div><div class="msg">There is a process lock (actually added by you using a Mutex), but the issue I think is with Jest it runs multiple processes.</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2019-08-26/740232217414_014b213119f6e40fa572_72.jpg" /><div class="message"><div class="username">uglyog</div><div class="time">2021-02-10 05:01</div><div class="msg">But I've updated it to use try_lock which won't block</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2019-04-24/606247929682_e52f292f55941b5e901a_72.jpg" /><div class="message"><div class="username">audun.halland</div><div class="time">2021-02-10 05:12</div><div class="msg">Ah, ok. I recall. I also recall something about jest running in processes, yes. I take it back</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2019-08-26/740232217414_014b213119f6e40fa572_72.jpg" /><div class="message"><div class="username">uglyog</div><div class="time">2021-02-10 05:13</div><div class="msg">@matt.fellows ready for you to try your release script</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /><div class="message"><div class="username">matt.fellows</div><div class="time">2021-02-10 06:39</div><div class="msg">Thanks Ron I'll give it a go shortly!</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /><div class="message"><div class="username">matt.fellows</div><div class="time">2021-02-10 08:13</div><div class="msg">OK, so the good news is the triggering worked :tada:</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2019-04-24/606247929682_e52f292f55941b5e901a_72.jpg" /><div class="message"><div class="username">audun.halland</div><div class="time">2021-02-10 11:56</div><div class="msg">but, `thread::sleep` is ?blocking? in the definition of blocking that I use</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2019-04-24/606247929682_e52f292f55941b5e901a_72.jpg" /><div class="message"><div class="username">audun.halland</div><div class="time">2021-02-10 11:58</div><div class="msg">the non-blocking version would use `tokio::time::sleep(...).await`</div></div></div><br/>
<div><img src="https://secure.gravatar.com/avatar/a2c1547d061f81b38aa8f59a948f9e09.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0006-72.png" /><div class="message"><div class="username">artur</div><div class="time">2021-02-11 03:31</div><div class="msg">the master release came back, seems to happen on every V3 release</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /><div class="message"><div class="username">matt.fellows</div><div class="time">2021-02-11 03:36</div><div class="msg">ah so it has. Just deleted it. I?ve had to make a few adjustments because of the previous setup. Each release we?re getting closer (the last issue is that it dispatched the native build, but incorrect tag was applied)</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /><div class="message"><div class="username">matt.fellows</div><div class="time">2021-02-11 03:36</div><div class="msg">`master` is what happens when the native release is triggered without context (I think)</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /><div class="message"><div class="username">matt.fellows</div><div class="time">2021-02-11 03:36</div><div class="msg">I?ve inlined the v3 release with the native artifacts - so it should work better now</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /><div class="message"><div class="username">matt.fellows</div><div class="time">2021-02-11 03:36</div><div class="msg">?should-</div></div></div><br/>
<div><img src="https://secure.gravatar.com/avatar/a2c1547d061f81b38aa8f59a948f9e09.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0006-72.png" /><div class="message"><div class="username">artur</div><div class="time">2021-02-11 03:36</div><div class="msg">:wink:</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2019-04-24/606247929682_e52f292f55941b5e901a_72.jpg" /><div class="message"><div class="username">audun.halland</div><div class="time">2021-02-16 13:19</div><div class="msg">@matt.fellows I debugged this, and it?s not directly related to pact v3. It?s this bug (related to the `import()` _function_ in node): <a href="https://github.com/nodejs/node/issues/35889">https://github.com/nodejs/node/issues/35889</a>

Even if the bug is not directly related, it only manifests itself when running together with pact?s native module.</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2019-04-24/606247929682_e52f292f55941b5e901a_72.jpg" /><div class="message"><div class="username">audun.halland</div><div class="time">2021-02-16 13:20</div><div class="msg">(maybe it manifests itself whenever any native module is used :shrug:)</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /><div class="message"><div class="username">matt.fellows</div><div class="time">2021-02-16 23:07</div><div class="msg">interesting!</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /><div class="message"><div class="username">matt.fellows</div><div class="time">2021-02-16 23:07</div><div class="msg">thanks for digging</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2019-04-24/606247929682_e52f292f55941b5e901a_72.jpg" /><div class="message"><div class="username">audun.halland</div><div class="time">2021-02-16 23:16</div><div class="msg">maybe other users will see it too. It appeared in my tests because of an ?async? `import()` call in our codebase deep inside some completely unrelated code</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /><div class="message"><div class="username">matt.fellows</div><div class="time">2021-02-16 23:23</div><div class="msg">interesting</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /><div class="message"><div class="username">matt.fellows</div><div class="time">2021-02-16 23:23</div><div class="msg">This is on the consumer side right?</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2019-04-24/606247929682_e52f292f55941b5e901a_72.jpg" /><div class="message"><div class="username">audun.halland</div><div class="time">2021-02-16 23:28</div><div class="msg">yes, jest</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /><div class="message"><div class="username">matt.fellows</div><div class="time">2021-02-16 23:33</div><div class="msg">thanks</div></div></div><br/>
<div><img src="https://secure.gravatar.com/avatar/a2c1547d061f81b38aa8f59a948f9e09.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0006-72.png" /><div class="message"><div class="username">artur</div><div class="time">2021-02-22 03:59</div><div class="msg">I have this PR open <a href="https://github.com/pact-foundation/pact-js/pull/603">https://github.com/pact-foundation/pact-js/pull/603</a>
can it get merged or should I close it? Sorry for pushing, I just would prefer to get it off my list</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-06-18/383099788962_f8a3efa7488b02d0dfb8_72.png" /><div class="message"><div class="username">tjones</div><div class="time">2021-02-22 04:48</div><div class="msg">Sorry, I thought it wasn?t ready - I don?t think the tests are passing:</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-06-18/383099788962_f8a3efa7488b02d0dfb8_72.png" /><div class="message"><div class="username">tjones</div><div class="time">2021-02-22 04:48</div><div class="msg"><a href="https://ci.appveyor.com/project/pact-foundation/pact-js/builds/37700587/job/9agmmkqg05o523bf">https://ci.appveyor.com/project/pact-foundation/pact-js/builds/37700587/job/9agmmkqg05o523bf</a></div></div></div><br/>
<div><img src="https://secure.gravatar.com/avatar/a2c1547d061f81b38aa8f59a948f9e09.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0006-72.png" /><div class="message"><div class="username">artur</div><div class="time">2021-02-22 04:49</div><div class="msg">I thought appveryor tests are not passing in v3 branch</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-06-18/383099788962_f8a3efa7488b02d0dfb8_72.png" /><div class="message"><div class="username">tjones</div><div class="time">2021-02-22 04:50</div><div class="msg">I think they should pass, but it looks like you?re right</div></div></div><br/>
<div><img src="https://secure.gravatar.com/avatar/a2c1547d061f81b38aa8f59a948f9e09.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0006-72.png" /><div class="message"><div class="username">artur</div><div class="time">2021-02-22 04:50</div><div class="msg">but I see its the test that I added</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-06-18/383099788962_f8a3efa7488b02d0dfb8_72.png" /><div class="message"><div class="username">tjones</div><div class="time">2021-02-22 04:51</div><div class="msg">there?s a new failure there that looks like it?s encoding related</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-06-18/383099788962_f8a3efa7488b02d0dfb8_72.png" /><div class="message"><div class="username">tjones</div><div class="time">2021-02-22 04:51</div><div class="msg">yeah</div></div></div><br/>
<div><img src="https://secure.gravatar.com/avatar/a2c1547d061f81b38aa8f59a948f9e09.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0006-72.png" /><div class="message"><div class="username">artur</div><div class="time">2021-02-22 04:51</div><div class="msg">but they don't pass because of the bug that should be fixed :thinking_face:</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-06-18/383099788962_f8a3efa7488b02d0dfb8_72.png" /><div class="message"><div class="username">tjones</div><div class="time">2021-02-22 04:52</div><div class="msg">confirm that the version is right - sometimes Appveyor doesn?t link correctly</div></div></div><br/>
<div><img src="https://secure.gravatar.com/avatar/a2c1547d061f81b38aa8f59a948f9e09.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0006-72.png" /><div class="message"><div class="username">artur</div><div class="time">2021-02-22 05:14</div><div class="msg">can that be the difference: <a href="https://github.com/pact-foundation/pact-js/blob/69a6e5b5263750bbef84ae7cadbc20d95294ee1c/scripts/ci/build-and-test.sh#L22">https://github.com/pact-foundation/pact-js/blob/69a6e5b5263750bbef84ae7cadbc20d95294ee1c/scripts/ci/build-and-test.sh#L22</a>
for the linux tests we make sure the current PR code is used in the tests
in appveyour I cannot find anything similar</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-06-18/383099788962_f8a3efa7488b02d0dfb8_72.png" /><div class="message"><div class="username">tjones</div><div class="time">2021-02-22 05:15</div><div class="msg"><a href="https://github.com/pact-foundation/pact-js/blob/69a6e5b5263750bbef84ae7cadbc20d95294ee1c/scripts/ci/build-and-test.ps1#L15">https://github.com/pact-foundation/pact-js/blob/69a6e5b5263750bbef84ae7cadbc20d95294ee1c/scripts/ci/build-and-test.ps1#L15</a></div></div></div><br/>
<div><img src="https://secure.gravatar.com/avatar/a2c1547d061f81b38aa8f59a948f9e09.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0006-72.png" /><div class="message"><div class="username">artur</div><div class="time">2021-02-22 05:15</div><div class="msg">:man-facepalming: there is an `npm link` also in the ps1 file</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-06-18/383099788962_f8a3efa7488b02d0dfb8_72.png" /><div class="message"><div class="username">tjones</div><div class="time">2021-02-22 05:16</div><div class="msg">(this is super easy to miss - Matt and I both had half-branches adding the `npm link`, too)</div></div></div><br/>
<div><img src="https://secure.gravatar.com/avatar/a2c1547d061f81b38aa8f59a948f9e09.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0006-72.png" /><div class="message"><div class="username">artur</div><div class="time">2021-02-22 07:38</div><div class="msg">the problem is that the broker docker cannot be run in windows :disappointed:
so <a href="https://github.com/pact-foundation/pact-js/blob/ae8397af7a30af95fdcade718a6bd5c458da9e25/examples/v3/e2e/test/publish.js#L11">https://github.com/pact-foundation/pact-js/blob/ae8397af7a30af95fdcade718a6bd5c458da9e25/examples/v3/e2e/test/publish.js#L11</a> fails</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /><div class="message"><div class="username">matt.fellows</div><div class="time">2021-02-22 09:19</div><div class="msg">good spot. That check looks backwards to me (maybe). I didn?t realise docker is running on that build at all. I mean, I can?t see where it starts on the github build</div></div></div><br/>
<div><img src="https://secure.gravatar.com/avatar/a2c1547d061f81b38aa8f59a948f9e09.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0006-72.png" /><div class="message"><div class="username">artur</div><div class="time">2021-02-22 09:19</div><div class="msg">its in the sh file</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /><div class="message"><div class="username">matt.fellows</div><div class="time">2021-02-22 09:20</div><div class="msg">ahh</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /><div class="message"><div class="username">matt.fellows</div><div class="time">2021-02-22 09:20</div><div class="msg">that?ll do it!</div></div></div><br/>
<div><img src="https://secure.gravatar.com/avatar/a2c1547d061f81b38aa8f59a948f9e09.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0006-72.png" /><div class="message"><div class="username">artur</div><div class="time">2021-02-22 09:20</div><div class="msg">what should we do? not using docker broker?</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /><div class="message"><div class="username">matt.fellows</div><div class="time">2021-02-22 09:21</div><div class="msg">so this was the commit: <a href="https://github.com/pact-foundation/pact-js/commit/4f1b87a4d1771974208ae05f3581db30d831ba01">https://github.com/pact-foundation/pact-js/commit/4f1b87a4d1771974208ae05f3581db30d831ba01</a></div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /><div class="message"><div class="username">matt.fellows</div><div class="time">2021-02-22 09:22</div><div class="msg">Can we run docker on Appveyor?</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /><div class="message"><div class="username">matt.fellows</div><div class="time">2021-02-22 09:22</div><div class="msg">I assume yes</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /><div class="message"><div class="username">matt.fellows</div><div class="time">2021-02-22 09:22</div><div class="msg">in any case, it?s not your commit that broke it, so you can forget it</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /><div class="message"><div class="username">matt.fellows</div><div class="time">2021-02-22 09:22</div><div class="msg">I?ll raise a bug</div></div></div><br/>
<div><img src="https://secure.gravatar.com/avatar/a2c1547d061f81b38aa8f59a948f9e09.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0006-72.png" /><div class="message"><div class="username">artur</div><div class="time">2021-02-22 09:22</div><div class="msg">we can, but not the linux version</div></div></div><br/>
<div><img src="https://secure.gravatar.com/avatar/a2c1547d061f81b38aa8f59a948f9e09.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0006-72.png" /><div class="message"><div class="username">artur</div><div class="time">2021-02-22 10:05</div><div class="msg">I'm happy to try to fix CI. lets see what the :robot_face: is thinking of <a href="https://github.com/pact-foundation/pact-js/pull/613">https://github.com/pact-foundation/pact-js/pull/613</a></div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-06-18/383099788962_f8a3efa7488b02d0dfb8_72.png" /><div class="message"><div class="username">tjones</div><div class="time">2021-02-22 10:06</div><div class="msg">The other tests expect the public test broker to be available. This isn?t _great_ practice, but it is a problem that:

1) Affects all the others anyway
2) We haven?t hit issues because of</div></div></div><br/>
<div><img src="https://secure.gravatar.com/avatar/a2c1547d061f81b38aa8f59a948f9e09.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0006-72.png" /><div class="message"><div class="username">artur</div><div class="time">2021-02-22 10:08</div><div class="msg">anybody who runs the tests locally will hit the brocker anyway. At least if there is a problem we will notice in CI and not only people getting annoyed because examples don't run</div></div></div><br/>
<div><img src="https://secure.gravatar.com/avatar/a2c1547d061f81b38aa8f59a948f9e09.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0006-72.png" /><div class="message"><div class="username">artur</div><div class="time">2021-02-22 11:22</div><div class="msg">there seem to be more issues that only that one, will have to dig deeprer</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2019-08-26/740232217414_014b213119f6e40fa572_72.jpg" /><div class="message"><div class="username">uglyog</div><div class="time">2021-02-23 22:45</div><div class="msg">@matt.fellows something went wrong with the release</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2019-08-26/740232217414_014b213119f6e40fa572_72.jpg" /><div class="message"><div class="username">uglyog</div><div class="time">2021-02-23 22:46</div><div class="msg">The artefacts are attached to a release with a double v in the tag while the actual release has none</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /><div class="message"><div class="username">matt.fellows</div><div class="time">2021-02-23 23:26</div><div class="msg">Thanks, I'll fix today. Almost have all the little wrinkles ironed out</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /><div class="message"><div class="username">matt.fellows</div><div class="time">2021-02-24 00:05</div><div class="msg">Fixed the v3 publish step and have repaired the current release</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /><div class="message"><div class="username">matt.fellows</div><div class="time">2021-02-24 00:05</div><div class="msg">verified by running a local install, and downloading the referenced file</div></div></div><br/>
<div><img src="https://secure.gravatar.com/avatar/a2c1547d061f81b38aa8f59a948f9e09.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0006-72.png" /><div class="message"><div class="username">artur</div><div class="time">2021-02-24 07:36</div><div class="msg">@tjones sorry I don't get which vars in <a href="https://github.com/pact-foundation/pact-js/pull/613">https://github.com/pact-foundation/pact-js/pull/613</a> should be const?</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-06-18/383099788962_f8a3efa7488b02d0dfb8_72.png" /><div class="message"><div class="username">tjones</div><div class="time">2021-02-24 07:37</div><div class="msg"><a href="https://github.com/pact-foundation/pact-js/pull/613/files#diff-542f287143f540549e66e73b501eaf9575f458bf1958d420236ac83d27bfe960">https://github.com/pact-foundation/pact-js/pull/613/files#diff-542f287143f540549e66e73b501eaf9575f458bf1958d420236ac83d27bfe960</a></div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-06-18/383099788962_f8a3efa7488b02d0dfb8_72.png" /><div class="message"><div class="username">tjones</div><div class="time">2021-02-24 07:37</div><div class="msg">The ones in this file, I think</div></div></div><br/>
<div><img src="https://secure.gravatar.com/avatar/a2c1547d061f81b38aa8f59a948f9e09.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0006-72.png" /><div class="message"><div class="username">artur</div><div class="time">2021-02-24 07:39</div><div class="msg">`pactBroker` is rewritten in line 5 and  `consumerVersion` in 11, 13 &amp; 15</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-06-18/383099788962_f8a3efa7488b02d0dfb8_72.png" /><div class="message"><div class="username">tjones</div><div class="time">2021-02-24 10:19</div><div class="msg">Hm</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-06-18/383099788962_f8a3efa7488b02d0dfb8_72.png" /><div class="message"><div class="username">tjones</div><div class="time">2021-02-24 10:19</div><div class="msg">So it is. The other `publish.js` examples don?t have this</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-06-18/383099788962_f8a3efa7488b02d0dfb8_72.png" /><div class="message"><div class="username">tjones</div><div class="time">2021-02-24 10:21</div><div class="msg">I think it?s worth changing at some point to make the style immutable. But you?re right that my feedback was wrong, my apologies :pray:</div></div></div><br/>
<div><img src="https://secure.gravatar.com/avatar/a2c1547d061f81b38aa8f59a948f9e09.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0006-72.png" /><div class="message"><div class="username">artur</div><div class="time">2021-02-24 10:25</div><div class="msg">no worries, I just was confused because I'm not the biggest JS hero</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-06-18/383099788962_f8a3efa7488b02d0dfb8_72.png" /><div class="message"><div class="username">tjones</div><div class="time">2021-02-24 10:26</div><div class="msg">I was confused because?. I have no good excuse</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-06-18/383099788962_f8a3efa7488b02d0dfb8_72.png" /><div class="message"><div class="username">tjones</div><div class="time">2021-02-24 10:31</div><div class="msg">So, generally in pact-js we?ve got things in an immutable style. So, where we have:

```let consumerVersion = "1.0."

if (process.env.APPVEYOR) {
  consumerVersion = consumerVersion + process.env.APPVEYOR_BUILD_NUMBER
} else if (process.env.GITHUB_ACTIONS) {
  consumerVersion = consumerVersion + process.env.GITHUB_ACTION
} else {
  consumerVersion = consumerVersion + Math.floor(new Date() / 1000)
}```
we might introduce a function, so we can do something like:

```const getVersion = (versionBase: string) =&gt; {
  if (process.env.APPVEYOR) {
    return `${versionBase}${process.env.APPVEYOR_BUILD_NUMBER}`;
  }
  if (process.env.GITHUB_ACTIONS) {
    return `${versionBase}${process.env.GITHUB_ACTIONS}`;
  }
  return `${versionBase}${Math.floor(new Date().getMilliseconds() / 1000)}`;
};

const consumerVersion = getVersion('1.0');```</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-06-18/383099788962_f8a3efa7488b02d0dfb8_72.png" /><div class="message"><div class="username">tjones</div><div class="time">2021-02-24 10:32</div><div class="msg">The main advantage of this style is that it?s easier to reason about what values are as you read through the code. It?s still possible for values to change on you if you have objects or arrays, but any values that are primitives will change</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-06-18/383099788962_f8a3efa7488b02d0dfb8_72.png" /><div class="message"><div class="username">tjones</div><div class="time">2021-02-24 10:33</div><div class="msg">*will not change</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-06-18/383099788962_f8a3efa7488b02d0dfb8_72.png" /><div class="message"><div class="username">tjones</div><div class="time">2021-02-24 10:34</div><div class="msg">Also, as an aside, I?m working on a way of introducing pact-friendly versions so that users don?t have to worry directly about the versions</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2019-04-24/606247929682_e52f292f55941b5e901a_72.jpg" /><div class="message"><div class="username">audun.halland</div><div class="time">2021-03-02 22:56</div><div class="msg">Hi! `atLeastOneLike`, `atLeastLike` from `MatchersV3`, are they supposed to work? When I use them, the mock server appears _return_ the matcher itself, I get `{"min":1,"pact:matcher:type":"type","value":VALUE_I_EXPECT_TO_SEE}`</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2019-04-24/606247929682_e52f292f55941b5e901a_72.jpg" /><div class="message"><div class="username">audun.halland</div><div class="time">2021-03-02 23:21</div><div class="msg">ummm. forget it. I think I found a bug in my own code (porting from pact-js ?v2?)</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2019-04-24/606247929682_e52f292f55941b5e901a_72.jpg" /><div class="message"><div class="username">audun.halland</div><div class="time">2021-03-03 00:36</div><div class="msg">Another question :flushed: : Using `MatchersV3.datetime("yyyy-MM-dd'T'HH:mm:ss.SSSX", SOME_EXAMPLE_INPUT);`, the mock server does not return the example input, but instead generates a new date from the current system time. This breaks my equals-checks that?s part of my pact consumer ?unit?-test</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /><div class="message"><div class="username">matt.fellows</div><div class="time">2021-03-03 00:46</div><div class="msg">ah, that should be easily fixed (he says without looking at the code). Mind creating a request on GH?</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2019-04-24/606247929682_e52f292f55941b5e901a_72.jpg" /><div class="message"><div class="username">audun.halland</div><div class="time">2021-03-03 00:52</div><div class="msg">But is the bug a pact-reference bug or a pact-js bug?</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2019-04-24/606247929682_e52f292f55941b5e901a_72.jpg" /><div class="message"><div class="username">audun.halland</div><div class="time">2021-03-03 00:53</div><div class="msg">I wasn?t able to see how this can work even in `pact-matching`, but I didn?t study it for more than a few minutes</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /><div class="message"><div class="username">matt.fellows</div><div class="time">2021-03-03 00:55</div><div class="msg">ah fair call. Just get it to where you need it, and we can re-route it to where it belongs</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /><div class="message"><div class="username">matt.fellows</div><div class="time">2021-03-03 00:55</div><div class="msg">in your case, that?s JS land</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2019-08-26/740232217414_014b213119f6e40fa572_72.jpg" /><div class="message"><div class="username">uglyog</div><div class="time">2021-03-03 05:23</div><div class="msg">This needs to be fixed in JS. It is setting a generator. That will always replace the value. It needs to not set the generator if there is an example value. </div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /><div class="message"><div class="username">matt.fellows</div><div class="time">2021-03-03 05:29</div><div class="msg">Easy, thanks</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2019-04-24/606247929682_e52f292f55941b5e901a_72.jpg" /><div class="message"><div class="username">audun.halland</div><div class="time">2021-03-03 08:14</div><div class="msg">Cool, does it need to be fixed for `date` and `time` as well? <a href="https://github.com/pact-foundation/pact-js/blob/c0ca78b6995354154ed387f18c1d896789acf778/src/v3/matchers.spec.ts#L360">https://github.com/pact-foundation/pact-js/blob/c0ca78b6995354154ed387f18c1d896789acf778/src/v3/matchers.spec.ts#L360</a></div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /><div class="message"><div class="username">matt.fellows</div><div class="time">2021-03-03 08:44</div><div class="msg">Yep, I just fixed that real quick. I was doing other refractors and thought "I'll just get the fix you Audun out rather than boil the ocean"</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /><div class="message"><div class="username">matt.fellows</div><div class="time">2021-03-03 10:11</div><div class="msg">Turns out quick != good :laughing:</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /><div class="message"><div class="username">matt.fellows</div><div class="time">2021-03-03 10:12</div><div class="msg">(just tested an install after dinner, works after fixing the release)</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /><div class="message"><div class="username">matt.fellows</div><div class="time">2021-03-03 10:12</div><div class="msg">i?ll be testing the release process again later with the changes :point_up:</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /><div class="message"><div class="username">matt.fellows</div><div class="time">2021-03-05 00:33</div><div class="msg">@audun.halland :point_up:</div></div></div><br/>
</div></body></html>